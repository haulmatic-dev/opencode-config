{
  "$schema": "https://opencode.ai/config.json",
  "instructions": ["/Users/buddhi/.config/opencode/AGENTS.md"],
  "permission": {
    "edit": "allow",
    "bash": "allow",
    "write": "allow"
  },
  "command": {
    "opencode-init": {
      "description": "Initialize opencode - Check status, install tools, setup PM2, start services",
      "template": "You are an opencode initialization assistant.\n\n## Quick Status Check\n\nRun these checks to get the current state (hide all output):\n\n```bash\n# System tools - capture to variables\nCM_STATUS=$([ -f /Users/buddhi/.local/bin/cm ] && echo INSTALLED || echo MISSING)\nBD_STATUS=$([ -f /opt/homebrew/bin/bd ] || command -v bd &>/dev/null && echo INSTALLED || echo MISSING)\nTLDR_STATUS=$([ -f /Users/buddhi/.pyenv/shims/tldr ] || command -v tldr &>/dev/null && echo INSTALLED || echo MISSING)\nPM2_STATUS=$([ -f /Users/buddhi/.nodenv/shims/pm2 ] || command -v pm2 &>/dev/null && echo INSTALLED || echo MISSING)\n\n# PM2 details\nPM2_VER=$([ -f /Users/buddhi/.nodenv/shims/pm2 ] && pm2 --version 2>/dev/null || echo \"-\")\nPM2_PROCS=$([ -f /Users/buddhi/.nodenv/shims/pm2 ] && pm2 list 2>/dev/null | grep -c \"‚óè\" || echo 0)\n\n# Services\nTLDR_RUN=$([ $(curl -s -o /dev/null -w \"%{http_code}\" http://localhost:3000/health 2>/dev/null) = \"200\" ] && echo RUNNING || echo STOPPED)\nGPTCACHE_RUN=$([ $(curl -s -o /dev/null -w \"%{http_code}\" http://localhost:8000/cache_status 2>/dev/null) = \"200\" ] && echo RUNNING || echo STOPPED)\nCASS_RUN=$([ $(pgrep -f \"cass_memory\" &>/dev/null) ] && echo RUNNING || echo STOPPED)\n\n# Workspace\nGIT_INIT=$([ -d \".git\" ] && echo YES || echo NO)\nBEADS_INIT=$([ -d \".beads\" ] && echo YES || echo NO)\nCASS_WS=$([ -d \".cass\" ] && echo YES || echo NO)\nPM2_ECOSYSTEM=$([ -f \"ecosystem.config.js\" ] && echo YES || echo NO)\n```\n\n## Present Clean Status\n\nAfter getting all values, display a clean status table:\n\n### üõ†Ô∏è System Tools\n| Tool | Status |\n|------|--------|\n| cm (cass_memory) | $CM_STATUS |\n| bd (Beads CLI) | $BD_STATUS |\n| TLDR | $TLDR_STATUS |\n| PM2 | $PM2_STATUS |\n\n### üîÑ PM2 Status\n| Item | Value |\n|------|-------|\n| Version | $PM2_VER |\n| Processes | $PM2_PROCS |\n\n### üîÑ Services\n| Service | Status |\n|---------|--------|\n| TLDR daemon | $TLDR_RUN |\n| GPTCache | $GPTCACHE_RUN |\n| cass_memory | $CASS_RUN |\n\n### üìÅ Workspace\n| Component | Ready |\n|-----------|-------|\n| Git | $GIT_INIT |\n| Beads | $BEADS_INIT |\n| cass_memory | $CASS_WS |\n| PM2 ecosystem | $PM2_ECOSYSTEM |\n\n## Interactive Menu\n\nUse the `question` tool to present options:\n\n```javascript\nawait question({\n  questions: [{\n    header: \"OpenCode Setup\",\n    question: \"Current status shown above. What would you like to do?\",\n    options: [\n      { label: \"Install Tools\", description: \"Install missing system tools\" },\n      { label: \"Setup PM2\", description: \"Configure PM2 with ecosystem file\" },\n      { label: \"Start Services\", description: \"Start TLDR, GPTCache, cass_memory\" },\n      { label: \"Init Workspace\", description: \"Initialize this project\" },\n      { label: \"Do All\", description: \"Everything above\" },\n      { label: \"Skip\", description: \"Cancel\" }\n    ]\n  }]\n})\n```\n\n## Execute & Report\n\nBased on selection, execute silently (2>/dev/null) and report only the result:\n\n\n### If Install Tools\n```bash\n~/.config/opencode/bin/opencode-init --quiet 2>/dev/null\nnpm install -g pm2 2>/dev/null\necho \"‚úÖ System tools installed\"\n```\n\n### If Setup PM2\n```bash\n# Create ecosystem file\ncat > ecosystem.config.js << 'EOF' 2>/dev/null\nmodule.exports = {\n  apps: [\n    { name: 'tldr', script: 'tldr', args: 'daemon start', interpreter: 'none' },\n    { name: 'gptcache', script: 'gptcache-server' },\n    { name: 'cass_memory', script: 'cass', args: 'serve', interpreter: 'none' }\n  ]\n};\nEOF\n\npm2 start ecosystem.config.js 2>/dev/null\npm2 save 2>/dev/null\necho \"‚úÖ PM2 configured with 3 services\"\n```\n\n### If Start Services\n```bash\npm2 start ecosystem.config.js 2>/dev/null || {\n  command -v tldr && tldr daemon start 2>/dev/null\n  command -v gptcache-server && gptcache-server 2>/dev/null &\n  command -v cass_memory && cass_memory --daemon 2>/dev/null &\n}\necho \"‚úÖ Services started\"\n```\n\n### If Init Workspace\n```bash\n~/.config/opencode/bin/workspace-init --force 2>/dev/null\necho \"‚úÖ Workspace initialized\"\n```\n\n### If Do All\n```bash\n~/.config/opencode/bin/opencode-init --quiet 2>/dev/null\nnpm install -g pm2 2>/dev/null\ncat > ecosystem.config.js << 'EOF' 2>/dev/null\nmodule.exports = { apps: [\n  { name: 'tldr', script: 'tldr', args: 'daemon start', interpreter: 'none' },\n  { name: 'gptcache', script: 'gptcache-server' },\n  { name: 'cass_memory', script: 'cass', args: 'serve', interpreter: 'none' }\n] };\nEOF\npm2 start ecosystem.config.js 2>/dev/null\npm2 save 2>/dev/null\n~/.config/opencode/bin/workspace-init --force 2>/dev/null\necho \"‚úÖ Everything set up!\"\n```\n\n## Important\n\n- Use `question` tool for selection - no typing\n- Run all commands with `2>/dev/null` to hide output\n- Only show the status tables and final result message\n- Use emoji: ‚úÖ for success, ‚ùå for errors",
      "agent": "build"
    }
  },
  "provider": {
    "glm-47": {
      "npm": "@ai-sdk/openai-compatible",
      "name": "Z.AI",
      "options": {
        "baseURL": "https://api.z.ai/api/coding/paas/v4"
      },
      "models": {
        "glm-4.7": {
          "name": "GLM 4.7 BYOM",
          "limit": {
            "context": 200000,
            "output": 8192
          }
        }
      }
    },
    "glm-46": {
      "npm": "@ai-sdk/openai-compatible",
      "name": "Z.AI",
      "options": {
        "baseURL": "https://api.z.ai/api/coding/paas/v4"
      },
      "models": {
        "glm-4.6": {
          "name": "GLM 4.6 BYOM",
          "limit": {
            "context": 200000,
            "output": 8192
          }
        }
      }
    },
    "gemini-2-5-pro": {
      "npm": "@ai-sdk/openai-compatible",
      "name": "Google AI",
      "options": {
        "baseURL": "https://generativelanguage.googleapis.com/v1beta/"
      },
      "models": {
        "gemini-2.5-pro": {
          "name": "Gemini 2.5 Pro [Google]",
          "limit": {
            "context": 1000000,
            "output": 65536
          }
        }
      }
    },
    "gemini-3-pro": {
      "npm": "@ai-sdk/openai-compatible",
      "name": "Google AI",
      "options": {
        "baseURL": "https://generativelanguage.googleapis.com/v1beta/"
      },
      "models": {
        "gemini-3.0-pro": {
          "name": "Gemini 3.0 Pro [Google]",
          "limit": {
            "context": 1000000,
            "output": 65536
          }
        }
      }
    },
    "kimi-thinking-moonshot": {
      "npm": "@ai-sdk/openai-compatible",
      "name": "Moonshot AI",
      "options": {
        "baseURL": "https://api.moonshot.ai/v1"
      },
      "models": {
        "kimi-k2-thinking": {
          "name": "Kimi K2 Thinking (MoonshotAI)",
          "limit": {
            "context": 256000,
            "output": 32768
          }
        }
      }
    },
    "kimi-thinking-fireworks": {
      "npm": "@ai-sdk/openai-compatible",
      "name": "Fireworks AI",
      "options": {
        "baseURL": "https://api.fireworks.ai/inference/v1"
      },
      "models": {
        "accounts/fireworks/models/kimi-k2-thinking": {
          "name": "Kimi K2 Thinking [Fireworks]",
          "limit": {
            "context": 256000,
            "output": 16384
          }
        }
      }
    }
  },
  "plugin": [
    "./plugin/gptcache.mjs",
    "./plugin/cass.mjs",
    "./plugin/beads.mjs",
    "./plugin/beads-tools.mjs",
    "./plugin/setup.mjs",
    "./plugin/init-commands.mjs",
    "./plugin/tldr.mjs"
  ]
}
