{"id":"opencode-04f","title":"2.1: Implement TDD enforcer","description":"Create lib/runner/gates.js with verifyTDD(). Run new tests against old code (FAIL), against new code (PASS). Enforce TDD.","notes":"Completed: verifyTDD() with TDD validation (must fail on old code, pass on new code)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T12:49:17.387411+05:30","created_by":"buddhi","updated_at":"2026-01-13T13:36:55.001994+05:30","closed_at":"2026-01-13T13:36:55.001996+05:30","dependencies":[{"issue_id":"opencode-04f","depends_on_id":"opencode-m6i","type":"blocking","created_at":"2026-01-13T12:52:43.387955+05:30","created_by":"buddhi"}]}
{"id":"opencode-06v","title":"1.5: Create workflow state machine definition","description":"Define code-driven workflow in lib/workflows/feature-dev.js. Export workflow object with start state and transitions. Config object with agent type, model, timeout per state.","notes":"Completed: Workflow state machine implemented in lib/workflows/feature-dev.js","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T12:48:38.085007+05:30","created_by":"buddhi","updated_at":"2026-01-13T13:30:11.870929+05:30","closed_at":"2026-01-13T13:30:11.870931+05:30","close_reason":"Closed"}
{"id":"opencode-0fl","title":"Implement test runner for file write interception tests (Section 3.1)","description":"Create test runner for Guardrails Section 3.1 - File Write Interception tests including deny .beads/ write, deny file write without task ID, and allow file write with task ID. Tests should validate checkFileWrite() functionality.","status":"closed","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T13:24:51.75703+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T13:25:27.063243+05:30","closed_at":"2026-01-14T13:25:27.063243+05:30","close_reason":"Closed"}
{"id":"opencode-0lv","title":"Test","description":"Verify gate integration with relay workflow","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-13T14:09:12.086448+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-13T15:59:52.687683+05:30","closed_at":"2026-01-13T15:59:52.687686+05:30"}
{"id":"opencode-0nj","title":"Benchmark","description":"Benchmark TLDR performance compared to previous osgrep workflows.\n\n**Metrics to measure**:\n- Query latency (target: <100ms)\n- Token savings (target: 95%)\n- Search relevance quality\n- User satisfaction\n\n**Implementation**:\n- Create benchmark script\n- Run against sample workflows\n- Compare with baseline\n- Document results\n\n**Dependencies**:\n- Phase 1 (DONE)","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-15T17:06:53.061892+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T21:19:02.369619+05:30","closed_at":"2026-01-15T21:19:02.369619+05:30","close_reason":"Completed: Created benchmark suite, 90-95% token reduction"}
{"id":"opencode-1c0","title":"4.1: Implement smart context extraction","description":"Create lib/smart-context.mjs: Parse stack traces, extract minimal relevant frames, apply heuristics to filter infrastructure frames, map frames to source code.","notes":"Completed: Task was closed previously - verifying","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T12:51:41.722322+05:30","created_by":"buddhi","updated_at":"2026-01-13T14:21:31.046263+05:30","closed_at":"2026-01-13T14:21:31.046263+05:30","dependencies":[{"issue_id":"opencode-1c0","depends_on_id":"opencode-bbm","type":"blocking","created_at":"2026-01-13T13:04:31.725052+05:30","created_by":"buddhi"}]}
{"id":"opencode-1d5","title":"2.2: Implement mutation testing gate","description":"Add verifyMutation() to gates.js. Integrate stryker, require mutation score > 80%. Return {passed, score, reason}.","notes":"Completed: verifyMutation() with stryker integration and 80% threshold","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-13T12:49:17.388137+05:30","created_by":"buddhi","updated_at":"2026-01-13T13:36:54.97518+05:30","closed_at":"2026-01-13T13:36:54.975184+05:30","dependencies":[{"issue_id":"opencode-1d5","depends_on_id":"opencode-m6i","type":"blocking","created_at":"2026-01-13T12:52:45.512849+05:30","created_by":"buddhi"}]}
{"id":"opencode-1i3","title":"2.4: Implement gate execution framework","description":"Create gate runner in gates.js. Execute gates from workflow config, collect results, determine pass/fail.","notes":"Completed: runGates() orchestrates verifyTDD(), verifyMutation(), verifyLint() with result collection","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T12:49:17.390026+05:30","created_by":"buddhi","updated_at":"2026-01-13T13:56:38.782806+05:30","closed_at":"2026-01-13T13:56:38.782817+05:30","dependencies":[{"issue_id":"opencode-1i3","depends_on_id":"opencode-04f","type":"blocking","created_at":"2026-01-13T12:52:59.56808+05:30","created_by":"buddhi"},{"issue_id":"opencode-1i3","depends_on_id":"opencode-1d5","type":"blocking","created_at":"2026-01-13T12:52:59.655665+05:30","created_by":"buddhi"},{"issue_id":"opencode-1i3","depends_on_id":"opencode-y4w","type":"blocking","created_at":"2026-01-13T12:52:59.757719+05:30","created_by":"buddhi"}]}
{"id":"opencode-1mj","title":"Implement test runner for full handoff execution tests (Section 5.5)","description":"Create test runner for Handoff Section 5.5 - Full Handoff Execution tests including successful multi-state workflow and workflow with gate failure. Tests should validate executeHandoff() end-to-end functionality.","status":"closed","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T13:24:51.756826+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T13:32:17.341984+05:30","closed_at":"2026-01-14T13:32:17.341984+05:30","close_reason":"Closed"}
{"id":"opencode-1ro","title":"Implement test runner for TDD gate tests","description":"Create test execution scripts for opencode-test-ci-2.1 through opencode-test-ci-2.3 from testing plan. Location: tests/components/sections-2/tdd-gates/ Delivers: - Test files for TDD compliance - Test files for TDD violation - Test files for no tests available","status":"closed","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T00:11:15.183107+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T13:37:29.751006+05:30","closed_at":"2026-01-14T13:37:29.751006+05:30","close_reason":"TDD gate tests implemented in tests/components/sections-2/tdd-gates/test-tdd.mjs. All three tests (2.1.1, 2.1.2, 2.1.3) are executable and passing."}
{"id":"opencode-1ss","title":"Apply","description":"Modify all logging calls to include the timestamp utility. Test to ensure timestamps are correctly prepended to log messages.","status":"tombstone","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T20:06:35.787644+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T22:05:11.944008+05:30","dependencies":[{"issue_id":"opencode-1ss","depends_on_id":"opencode-6y7","type":"blocks","created_at":"2026-01-14T20:07:01.131058+05:30","created_by":"Buddhi De Silva"}],"deleted_at":"2026-01-15T22:05:11.944008+05:30","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"opencode-1v0","title":"1.6: Implement basic Pass/Fail loop","description":"Create basic agent execution loop in lib/runner/index.js. Load workflow, start at workflow.start, execute agent via OpencodeSDK, check exit code.","notes":"Completed: executeWorkflow() with state machine loop, agent execution, gate handling, terminal states","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-13T12:48:38.075052+05:30","created_by":"buddhi","updated_at":"2026-01-13T13:36:54.971217+05:30","closed_at":"2026-01-13T13:36:54.971226+05:30","close_reason":"Completed","dependencies":[{"issue_id":"opencode-1v0","depends_on_id":"opencode-m6i","type":"blocking","created_at":"2026-01-13T12:52:27.413023+05:30","created_by":"buddhi"},{"issue_id":"opencode-1v0","depends_on_id":"opencode-06v","type":"blocking","created_at":"2026-01-13T12:52:27.449486+05:30","created_by":"buddhi"}]}
{"id":"opencode-29q","title":"Implement test runner for context distillation tests","description":"Create test execution scripts for opencode-test-ci-1.4 through opencode-test-ci-1.5 from testing plan. Location: tests/components/sections-1/4-context-distill/ Delivers: - Test files for basic context extraction - Test files for context size limits - Progress logging validation","status":"closed","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T00:10:42.892887+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T13:15:36.682413+05:30","closed_at":"2026-01-14T13:15:36.682413+05:30","close_reason":"Closed"}
{"id":"opencode-2i0","title":"4.2: Implement failure fingerprinting","description":"Create lib/failure-fingerprinter.mjs: Normalize stack traces, calculate SHA-256 fingerprint including error_type+stack+agent+stage, check for existing fix tasks (deduplication).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T12:51:41.742044+05:30","created_by":"buddhi","updated_at":"2026-01-13T13:03:52.082289+05:30","closed_at":"2026-01-13T13:03:52.082289+05:30","dependencies":[{"issue_id":"opencode-2i0","depends_on_id":"opencode-919","type":"blocking","created_at":"2026-01-13T12:52:59.527454+05:30","created_by":"buddhi"}]}
{"id":"opencode-2n0","title":"Create","description":"Create bin/runner script as CLI entry point for agent runner system with argument parsing (--task, --agent, --workflow, --help), help text display, workflow selection support, and proper executable permissions","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T15:04:19.351405+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T15:07:09.230067+05:30","closed_at":"2026-01-14T15:07:09.230067+05:30","close_reason":"Completed"}
{"id":"opencode-2t1","title":"Implement test runner for agent spawning tests (Section 5.1)","description":"Create test runner for Handoff Section 5.1 - Agent Spawning tests including spawn agent process, agent timeout handling, agent exits successfully, and agent exits with error. Tests should validate spawnAgent() and waitForCompletion() functionality.","status":"closed","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T13:24:51.754589+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T13:27:42.229271+05:30","closed_at":"2026-01-14T13:27:42.229271+05:30","close_reason":"Closed"}
{"id":"opencode-2uv","title":"{\"title\":\"Implement TDD Strict Mode - Old vs New Code Comparison\",\"description\":\"Section 2.1 - Run new tests against old code (expect FAIL). Run new tests against new code (expect PASS). Reject if TDD violated\",\"priority\":1}","description":"Section 2.1 - Implement TDD Strict Mode - Old vs New Code Comparison\n\nRequirements:\nStrict TDD enforcement gate with two-stage verification:\n\nStage 1 - Tests on OLD code:\n- Run new tests against unmodified code\n- Expected: Tests FAIL (if they pass, TDD violated)\n- If PASS: Reject code, return failure\n\nStage 2 - Tests on NEW code:\n- Run same tests against new implementation\n- Expected: Tests PASS\n- If FAIL: Return failure with test output\n\nImplementation:\n- Create lib/runner/gates/tdd-enforcer.js\n- Function: verifyTDDStrict(testFiles, modifiedFiles)\n- Git stash new code, run tests, git stash pop, run tests again\n- Compare results\n\nFiles to create/modify:\n- lib/runner/gates.js (update verifyTDD to call strict mode)\n- Create lib/runner/gates/tdd-enforcer.js\n- Add configuration option: workflow.global.strictTDD = true\n\nSuccess criteria:\n- TDD violations detected and rejected\n- Tests must fail on old code to pass gate\n- Tests must pass on new code to pass gate\n- Clear error messages on TDD violation\n\nDependencies:\n- Git operations (stash, stash pop)\n- Test runner (npm test)\n- Gate framework (gates.js)","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T12:28:58.962354+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T13:34:12.018966+05:30","closed_at":"2026-01-14T13:34:12.018966+05:30","close_reason":"Completed"}
{"id":"opencode-2x6","title":"Create smart context selection logic","description":"Create smart context selection logic to determine what code context to include.\n\n**Requirements**:\n- Analyze user query to determine relevant files\n- Prioritize files mentioned in query\n- Include caller/callee relationships\n- Limit context to maxContextTokens (1000)\n\n**Implementation**:\n- Create lib/tldr-context-selector.mjs\n- Implement relevance scoring algorithm\n- Use file pattern matching on query\n- Integrate with existing plugin\n\n**Dependencies**:\n- Phase 1 (DONE)","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-15T17:04:41.664627+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T18:00:04.492874+05:30","closed_at":"2026-01-15T18:00:04.492878+05:30"}
{"id":"opencode-2z6","title":"Remove osgrep from installation scripts","description":"Remove osgrep from all installation and setup scripts.\n\n**Files to modify**:\n- bin/opencode-init\n- bin/workspace-init\n- Any other installation scripts\n\n**Implementation**:\n- Remove osgrep installation commands\n- Remove osgrep health checks\n- Add TLDR installation instead\n- Test installation still works\n\n**Dependencies**:\n- Phase 1 (DONE)","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-15T17:05:52.177439+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T17:58:36.101768+05:30","closed_at":"2026-01-15T17:58:36.101772+05:30"}
{"id":"opencode-379","title":"Map workflow agent names to actual agent files","description":"Fix lib/workflows/feature-dev.js and lib/runner/agent-loader.js to map workflow agent names to actual available agent files.\n\nCurrent workflow uses:\n- prd-agent\n- implementation-specialist\n- testing-specialist\n- fixing-specialist\n- security-specialist\n\nAvailable agent files are:\n- prd.md\n- test-specialist.md\n- fix-specialist.md\n- adversarial-reviewer.md\n- orchestrator.md\n\nNeed to create or update mapping to:\n- prd-agent → prd.md ✓\n- implementation-specialist → orchestrator.md (or create new)\n- testing-specialist → test-specialist.md ✓\n- fixing-specialist → fix-specialist.md ✓\n- security-specialist → adversarial-reviewer.md ✓","status":"tombstone","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T20:12:19.055378+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T22:05:11.944008+05:30","dependencies":[{"issue_id":"opencode-379","depends_on_id":"opencode-m08","type":"discovered-from","created_at":"2026-01-14T20:12:19.056374+05:30","created_by":"Buddhi De Silva"}],"deleted_at":"2026-01-15T22:05:11.944008+05:30","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"opencode-3ew","title":"3.2: Implement state machine navigation","description":"Add determineNextState() to handoff.js. Read workflow transitions, evaluate gate results, return next state. Handle success (onSuccess) and failure (onFail).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T12:50:33.710639+05:30","created_by":"buddhi","updated_at":"2026-01-13T13:03:44.553048+05:30","closed_at":"2026-01-13T14:09:14.195428+05:30","dependencies":[{"issue_id":"opencode-3ew","depends_on_id":"opencode-4c1","type":"blocking","created_at":"2026-01-13T13:04:14.098105+05:30","created_by":"buddhi"}]}
{"id":"opencode-3is","title":"Add coverage and UBS scripts to package.json","description":"Add npm run coverage and npm run ubs scripts","notes":"Added npm run coverage and npm run ubs scripts to package.json","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T15:54:32.790214+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T15:59:23.991876+05:30","closed_at":"2026-01-14T15:59:23.991877+05:30"}
{"id":"opencode-3zk","title":"Implement test runners for Core Runner, Gates, Guardrails, Workflow, and Handoff components","description":"Implement test execution scripts for Sections 1-5 of testing plan. Location: tests/components/sections-1-5/","status":"closed","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T00:09:29.768129+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T14:22:45.717109+05:30","closed_at":"2026-01-14T14:22:45.717109+05:30","close_reason":"Closed"}
{"id":"opencode-41o","title":"Implement tldr_cfg for control flow graphs","description":"Implement tldr_cfg tool for control flow graph generation.\n\n**Requirements**:\n- Input: file path or function name\n- Output: control flow graph\n- Show branches and loops\n- Highlight complexity metrics\n\n**Implementation**:\n- Add tldr_cfg to lib/tldr-client.mjs\n- Add tldr_cfg tool to plugin/tldr.mjs\n- Implement CLI call to TLDR daemon\n- Add comprehensive tests\n\n**Dependencies**:\n- Phase 1 (DONE)","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-15T17:07:15.021292+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T17:16:58.011187+05:30","closed_at":"2026-01-15T17:16:58.011189+05:30"}
{"id":"opencode-4c1","title":"3.1: Implement handoff.js for relay orchestration","description":"Create lib/runner/handoff.js with relay logic: Determine next state from workflow, spawn next agent with child_process.spawn(), handle agent completion.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T12:50:33.713325+05:30","created_by":"buddhi","updated_at":"2026-01-13T14:10:54.72658+05:30","closed_at":"2026-01-13T14:10:54.72658+05:30","dependencies":[{"issue_id":"opencode-4c1","depends_on_id":"opencode-1v0","type":"blocking","created_at":"2026-01-13T13:04:36.750533+05:30","created_by":"buddhi"}]}
{"id":"opencode-4io","title":"Identify","description":"Survey the codebase to find all logging functions/methods and their current implementation patterns. Document file paths and usage patterns.","status":"tombstone","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T20:06:16.003678+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T22:05:11.944008+05:30","deleted_at":"2026-01-15T22:05:11.944008+05:30","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"opencode-4o7","title":"1.3: Create CLI argument parser for Runner","description":"Implement CLI argument parsing in lib/runner/index.js. Parse --task <ID> (required), --agent <TYPE> (required), --workflow <TYPE> (default: feature-dev).","notes":"Completed: args.mjs created for CLI argument parsing","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-13T12:48:38.070485+05:30","created_by":"buddhi","updated_at":"2026-01-13T13:29:51.124876+05:30","closed_at":"2026-01-13T13:29:51.124884+05:30","close_reason":"Implemented CLI argument parser in lib/runner/args.mjs with --task, --agent, --workflow parsing and validation","dependencies":[{"issue_id":"opencode-4o7","depends_on_id":"opencode-ej0","type":"blocking","created_at":"2026-01-13T12:52:39.11048+05:30","created_by":"buddhi"}]}
{"id":"opencode-4se","title":"Implement","description":"Implement MCP server to expose TLDR tools via Model Context Protocol.\n\n**Requirements**:\n- Expose all TLDR tools via MCP\n- Handle MCP protocol communication\n- Implement tool request/response\n- Support all TLDR operations\n\n**Implementation**:\n- Create lib/tldr-mcp-server.mjs\n- Implement MCP server interface\n- Map TLDR tools to MCP tools\n- Handle daemon communication\n\n**Dependencies**:\n- Phase 1 (DONE)","status":"tombstone","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-15T17:07:36.04556+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T21:47:30.491075+05:30","deleted_at":"2026-01-15T21:47:30.491075+05:30","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"opencode-4ul","title":"Add end-to-end integration tests","description":"Create E2E integration tests for complete workflow","notes":"Created test/e2e/complete-workflow.test.mjs with comprehensive E2E tests","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T15:54:32.792494+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T15:59:23.98982+05:30","closed_at":"2026-01-14T15:59:23.989827+05:30"}
{"id":"opencode-4yu","title":"Fix","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T16:57:56.607007+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T17:03:59.150794+05:30","closed_at":"2026-01-14T17:03:59.150794+05:30","close_reason":"Fixed all lint errors in lib/runner/ directory. Applied fixes for: node: protocol imports, template strings, unused variables/parameters, suspicious isNaN usage. Tests directory error (unused variable) does not block execution."}
{"id":"opencode-52z","title":"Document","description":"Document the TLDR MCP integration for users.\n\n**Requirements**:\n- Document MCP server setup\n- Document available tools\n- Provide usage examples\n- Document troubleshooting\n\n**Implementation**:\n- Create docs/MCP-TLDR-INTEGRATION.md\n- Include configuration examples\n- Add usage demos\n- Document limitations\n\n**Dependencies**:\n- Phase 6 Tasks 1-4","status":"tombstone","priority":3,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-15T17:08:03.957523+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T21:47:30.491075+05:30","deleted_at":"2026-01-15T21:47:30.491075+05:30","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"opencode-5it","title":"4.8: Integrate guardrails with runner","description":"Connect lib/runner/guardrails.js to lib/runner/index.js: Load guardrail plugin, intercept file writes, git commits, git checkouts, throw GuardrailException on violations.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T12:51:41.725161+05:30","created_by":"buddhi","updated_at":"2026-01-13T14:52:48.590573+05:30","closed_at":"2026-01-13T14:52:48.590573+05:30","close_reason":"Guardrails integrated with runner successfully. Implementation includes: initialization in executeWorkflow, enforcement via enforceGuardrails function, exception handling in runAgent, workflow config with guardrails enabled, and integration test passing.","dependencies":[{"issue_id":"opencode-5it","depends_on_id":"opencode-v9z","type":"blocking","created_at":"2026-01-13T12:52:59.595751+05:30","created_by":"buddhi"}]}
{"id":"opencode-5l5","title":"TLDR","description":"Daily task to verify TLDR daemon responsiveness and availability.\n\n**Steps to Execute:**\n1. Check daemon status: \n2. Query health endpoint: \n3. Measure response time: \n4. Check memory usage: \n5. Log results to: \n\n**Success Criteria:**\n- Daemon status: running\n- Health endpoint returns: \n- Response time: <100ms\n- No errors in logs\n- Memory usage:\n**Alert Thresholds:**\n- Warning: Response <500MB\n time >500ms\n- Critical: Response time >1s\n- Critical: Health check returns error\n- Critical: Daemon not running\n- Warning: Memory usage >400MB\n\n**Owner:** @tldr-maintainer\n\n**Dependencies:**\n- Link to: TLDR Daemon (daemon/tldr-daemon.mjs)\n- Link to: TLDR Health Endpoint (plugin/tldr.mjs:health)","status":"open","priority":3,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-15T21:12:20.759531+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T21:12:20.759531+05:30","labels":["daily","maintenance","recurring","tldr"]}
{"id":"opencode-5np","title":"Create agent-loader-registry.js implementation","description":"Create new file lib/runner/agent-loader-registry.js implementing the YAML-based registry architecture.\n\nImplementation:\n1. Copy the production-ready implementation from design document\n2. Implement buildRegistry() function:\n   - Scan agent/*.md files\n   - Parse YAML frontmatter with js-yaml\n   - Build byId and byAlias registries\n   - Validate no duplicate IDs or aliases\n\n3. Implement loadAgent(agentId) function:\n   - Resolve aliases to canonical IDs\n   - Load agent content from file\n   - Parse persona, capabilities, instructions\n   - Provide helpful error messages\n\n4. Implement helper functions:\n   - formatAgentForPrompt(agent) - Format for LLM\n   - reloadRegistry() - For dev hot-reload\n   - getRegisteredAgents() - For debugging\n\nFile location: lib/runner/agent-loader-registry.js\nEstimated lines: ~150 lines","status":"tombstone","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T20:39:23.214038+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T20:42:21.531854+05:30","deleted_at":"2026-01-14T20:42:21.531854+05:30","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"opencode-5r3","title":"4.4: Implement reactive rebase","description":"Create lib/reactive-rebase.mjs: Check if main is ahead (git fetch + rev-list), trigger automatic git rebase when ahead, create backup before rebase.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T12:51:41.722995+05:30","created_by":"buddhi","updated_at":"2026-01-13T14:45:14.888928+05:30","closed_at":"2026-01-13T14:45:14.888928+05:30"}
{"id":"opencode-5tv","title":"Implement","description":"Implement the agent.execute.after hook for shift-left diagnostics on code edits.\n\n**Requirements**:\n- Detect when agent modifies files\n- Run TLDR impact analysis on modified files\n- Report potential issues before commit\n- Log diagnostics for observability\n\n**Implementation**:\n- Add new hook in plugin/tldr.mjs\n- Compare output.modifiedFiles with original\n- Call tldr_impact for each modified file\n- Output warnings to console/agent\n\n**Dependencies**:\n- Phase 1 (DONE)","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-15T17:04:34.01208+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T22:05:10.222235+05:30","closed_at":"2026-01-15T22:05:10.222235+05:30","close_reason":"Completed: agent.execute.after hook implemented at plugin/tldr.mjs:989 with shift-left diagnostics"}
{"id":"opencode-5wc","title":"{\"title\":\"Integrate test framework with actual implementations\",\"description\":\"Update test runner framework to validate against actual lib/runner implementations instead of mocks\",\"priority\":2}","notes":"Completed: Integration tests (duplicate task of opencode-qh8)","status":"tombstone","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T14:44:05.301802+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T18:01:15.095173+05:30","close_reason":"Duplicate/corrupted task - test framework already completed in opencode-qh8","deleted_at":"2026-01-14T18:01:15.095173+05:30","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"opencode-5zz","title":"TLDR","description":"Monthly task to review TLDR performance metrics and identify regressions.\n\n**Steps to Execute:**\n1. Run benchmark suite: \n2. Compare to baseline: \n3. Generate report: \n4. Review significant changes: Identify metrics with >5% deviation\n5. Document findings: Update \n\n**Success Criteria:**\n- All benchmarks complete successfully\n- Query latency: within 10% of baseline (<110% of baseline)\n- Indexing speed: within 10% of baseline (>90% of baseline)\n- Cache hit rate: within 5% of baseline\n- Memory efficiency: within 10% of baseline\n\n**Alert Thresholds:**\n- Warning: Any metric degraded 5-10%\n- Critical: Any metric degraded >10%\n- Critical: Benchmark suite fails to complete\n- Warning: Multiple metrics degraded simultaneously\n\n**Owner:** @tldr-maintainer\n\n**Dependencies:**\n- Link to: TLDR Benchmark Suite (bin/tldr-benchmark.mjs)\n- Link to: TLDR Performance Config (.tldr/benchmarks/config.json)","status":"open","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-15T21:12:27.59038+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T21:12:27.59038+05:30","labels":["maintenance","monthly","recurring","tldr"]}
{"id":"opencode-67y","title":"Implement","description":"Add task branch checkout functionality to lib/runner/index.js:\n\n1. Before executing agent, checkout branch: beads/task-{taskId}\n2. If branch doesn't exist, create it from main\n3. Work is done on this isolated branch\n4. On completion, handoff will handle cleanup\n5. Handle branch already exists case gracefully\n\nThis is critical for task isolation and preventing work contamination.","notes":"Implemented task branch checkout: beads/task-{id} branches created and managed before execution","status":"closed","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T17:31:08.405789+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T17:35:21.353075+05:30","closed_at":"2026-01-14T17:35:21.353076+05:30"}
{"id":"opencode-683","title":"Integrate","description":"Integrate llm-tldr (code analysis with 95% token savings) to completely replace and remove osgrep with 5-layer code analysis.\n\n**Scope**: Phase 1 - Core Plugin Integration\n\n**Key Deliverables**:\n- Create plugin/tldr.mjs with tool definitions\n- Create config/tldr.json for configuration\n- Create lib/tldr-client.mjs for TLDR daemon communication\n- Implement basic tools: tldr_context, tldr_semantic\n- Add to opencode.json plugin list\n- Implement guardrails in tool descriptions\n\n**Impact**: Reduces token usage by 95%, enables 300x faster queries, provides program slicing, data flow analysis, and impact analysis capabilities.\n\n**Note**: osgrep will be completely removed in Phase 4 (Week 4). No fallback to osgrep will be implemented.","status":"closed","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T19:06:23.420439+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T16:37:25.443789+05:30","closed_at":"2026-01-15T16:37:25.443791+05:30"}
{"id":"opencode-68c","title":"4.7: Implement git automation safety","description":"Enhance lib/reactive-rebase.mjs: Never use --force flag, validate via GitHub API before operations, check branch protection status, maintain operation audit log.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T12:51:41.726622+05:30","created_by":"buddhi","updated_at":"2026-01-13T15:56:17.329627+05:30","closed_at":"2026-01-13T15:56:17.32963+05:30","dependencies":[{"issue_id":"opencode-68c","depends_on_id":"opencode-5r3","type":"blocking","created_at":"2026-01-13T12:52:59.530764+05:30","created_by":"buddhi"}]}
{"id":"opencode-6qm","title":"Implement tldr_arch for architecture analysis","description":"Implement tldr_arch tool for architecture layer analysis.\n\n**Requirements**:\n- Input: project root or file\n- Output: architecture layers\n- Show module dependencies\n- Identify architectural violations\n\n**Implementation**:\n- Add tldr_arch to lib/tldr-client.mjs\n- Add tldr_arch tool to plugin/tldr.mjs\n- Implement CLI call to TLDR daemon\n- Add comprehensive tests\n\n**Dependencies**:\n- Phase 1 (DONE)","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-15T17:07:21.93217+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T17:16:58.109512+05:30","closed_at":"2026-01-15T17:16:58.109516+05:30"}
{"id":"opencode-6tw","title":"{\"title\":\"Implement Smart Context - Stack Trace Slicing\",\"description\":\"Section 6 - Advanced context distillation. Parse previous errors/logs to create minimal prompt context. Use Context Slices instead of entire files\",\"priority\":1}","description":"Section 6 - Implement Smart Context - Stack Trace Slicing\n\nRequirements:\nAdvanced context distillation to create minimal prompt context:\n\n1. Parse previous errors/logs from progress.txt\n2. Extract stack trace top 10 lines only\n3. Include only file paths and line numbers from stack trace\n4. Remove unrelated error noise\n5. Use Context Slices instead of entire files\n\nInput to Fix Specialist:\n- NOT: Entire file + 500 lines of logs\n- YES: The 20 lines of code referenced in stack trace + specific error message\n\nExample:\nInstead of:\n\"Read entire src/api/user.js (450 lines) and fix TypeError at line 234\"\n\nUse:\n\"Read src/api/user.js:220-240, check line 234. Error: Cannot read property 'id' of undefined\"\n\nFiles to modify:\n- lib/runner/progress.js (readProgressLog enhancement)\n- lib/runner/index.js (distillContext enhancement)\n- agent/fix-specialist.md (update to expect context slices)\n\nSuccess criteria:\n- Context size < 5KB per prompt\n- Stack traces sliced to relevant code only\n- Fix Specialist receives minimal actionable context\n- No irrelevant logs included\n\nDependencies:\n- Progress logging (already implemented)\n- Basic context distillation (already in index.js:142-149)","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T12:28:58.965681+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T13:28:56.700833+05:30","closed_at":"2026-01-14T13:28:56.700833+05:30","close_reason":"Completed"}
{"id":"opencode-6y7","title":"Implement","description":"Create a utility function that generates ISO 8601 formatted timestamps for logging. Ensure consistent format across all logs.","status":"tombstone","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T20:06:35.787184+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T22:05:11.944008+05:30","dependencies":[{"issue_id":"opencode-6y7","depends_on_id":"opencode-742","type":"blocks","created_at":"2026-01-14T20:06:59.156464+05:30","created_by":"Buddhi De Silva"}],"deleted_at":"2026-01-15T22:05:11.944008+05:30","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"opencode-6z4","title":"Implement tldr_dfg for data flow analysis","description":"Implement tldr_dfg tool for data flow analysis.\n\n**Requirements**:\n- Input: function name\n- Output: data flow graph\n- Track variable definitions and uses\n- Show data dependencies\n\n**Implementation**:\n- Add tldr_dfg to lib/tldr-client.mjs\n- Add tldr_dfg tool to plugin/tldr.mjs\n- Implement CLI call to TLDR daemon\n- Add comprehensive tests\n\n**Dependencies**:\n- Phase 1 (DONE)","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-15T17:07:07.687408+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T17:16:57.91337+05:30","closed_at":"2026-01-15T17:16:57.913372+05:30"}
{"id":"opencode-742","title":"Identify","description":"Survey the codebase to find all logging functions/methods and their current implementation patterns. Document file paths and usage patterns.","status":"tombstone","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T20:06:35.800424+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T22:05:11.944008+05:30","deleted_at":"2026-01-15T22:05:11.944008+05:30","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"opencode-7bl","title":"Implement agent registry with self-describing personas","notes":"✅ MERGED into main!\n\nPR #28 merged at 2026-01-15T09:02:03Z\n\nChanges merged:\n- lib/runner/agent-loader-registry.mjs (199 lines)\n- lib/runner/agent-loader.js (150 lines)\n- lib/runner/index.js (updated imports)\n- 19 agent/*.md files (added id field)\n- tests/unit/test-agent-registry.mjs (127 lines)\n- package.json, package-lock.json (js-yaml dependency)\n\nAll 48 comprehensive tests pass ✅","status":"closed","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T20:42:45.477248+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T14:32:24.483969+05:30","closed_at":"2026-01-15T14:32:24.483984+05:30","dependencies":[{"issue_id":"opencode-7bl","depends_on_id":"opencode-r78","type":"blocks","created_at":"2026-01-14T20:42:49.53583+05:30","created_by":"Buddhi De Silva"}]}
{"id":"opencode-7do","title":"Create agent-loader-registry.js implementation","description":"Create new file lib/runner/agent-loader-registry.js implementing YAML-based registry architecture.\n\nImplementation:\n1. Scan agent/*.md files\n2. Parse YAML frontmatter with js-yaml\n3. Build byId and byAlias registries\n4. Implement loadAgent(agentId) with alias resolution\n5. Implement formatAgentForPrompt(), reloadRegistry(), getRegisteredAgents()\n\nEstimated lines: ~150 lines\n\nDependencies:\n- Requires js-yaml to be installed (opencode-mws)","status":"closed","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T20:42:09.585394+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T21:16:14.972795+05:30","closed_at":"2026-01-14T21:16:14.972798+05:30","dependencies":[{"issue_id":"opencode-7do","depends_on_id":"opencode-mws","type":"blocks","created_at":"2026-01-14T20:42:49.106122+05:30","created_by":"Buddhi De Silva"}]}
{"id":"opencode-7qs","title":"4.9: Create agent persona definitions","description":"Create agent/*.md files: adversarial-reviewer.md (security auditor), fix-specialist.md (context slices only), conflict-resolver.md (git conflict handling).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T12:51:41.723635+05:30","created_by":"buddhi","updated_at":"2026-01-13T14:48:31.219792+05:30","closed_at":"2026-01-13T14:48:31.219795+05:30"}
{"id":"opencode-89e","title":"Create","description":"Create main plugin file for TLDR integration with tool definitions.\n\n**Requirements**:\n- Follow existing plugin pattern (see plugin/cass.mjs)\n- Register tldr_context and tldr_semantic tools\n- Include guardrails in tool descriptions (critical)\n- Set up plugin lifecycle hooks\n- Implement daemon health checks\n\n**Guardrails to implement**:\n- Scope ceiling guardrail: TLDR impact must not authorize scope expansion\n- Program slicing guardrail: Only for debugging\n- Deterministic semantic search: TLDR → osgrep → grep fallback\n\n**Files to create**:\n- plugin/tldr.mjs\n\n**Dependencies**:\n- Parent: opencode-683","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T19:06:56.603815+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T15:22:04.442219+05:30","closed_at":"2026-01-15T15:22:04.442223+05:30"}
{"id":"opencode-8ry","title":"{\"title\":\"Implement Reactive Rebase - Git automation\",\"description\":\"Section 7.1 - Check if origin/main ahead of task branch. If yes, auto-rebase. Handle conflicts by spawning ConflictResolver agent.\",\"priority\":1}","description":"Section 7.1 - Implement Reactive Rebase - Git automation\n\nRequirements:\n1. Check if origin/main is ahead of task branch on startup\n2. If yes, pause workflow and run 'git rebase origin/main'\n3. On success: Resume workflow\n4. On conflict: Spawn ConflictResolver agent to analyze 3-way diffs\n5. Use Beads to track rebase state in task metadata\n\nFiles to modify:\n- lib/runner/handoff.js (add check at workflow start)\n- agent/conflict-resolver.md (define agent behavior)\n\nSuccess criteria:\n- Auto-rebase triggers when main is updated\n- Conflicts spawn ConflictResolver agent\n- Rebase state tracked in Beads metadata\n- Workflow resumes cleanly after successful rebase\n\nDependencies:\n- Git repository with main branch protection\n- Beads client working\n- ConflictResolver agent defined","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T12:28:48.647784+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T13:48:33.80706+05:30","closed_at":"2026-01-14T13:48:33.80706+05:30","close_reason":"Completed"}
{"id":"opencode-8se","title":"Implement agent registry with self-describing personas","description":"Replace hardcoded agent mapping with YAML-based registry where agents declare their own identity, aliases, and capabilities.\n\nThis implements the production-grade agent loading architecture from the design document.\n\nKey changes:\n1. Add YAML frontmatter to all agent files (id, aliases)\n2. Create lib/runner/agent-loader-registry.js with registry builder\n3. Update lib/runner/index.js to use new loader\n4. Remove hardcoded mapping from original agent-loader.js\n5. Test end-to-end agent spawning with personas\n\nBenefits:\n- Agents declare identity explicitly\n- Workflows use stable IDs\n- Aliases for backward compatibility\n- Deterministic resolution, no guessing\n- Future-proof for versioning, capabilities\n\nRelated: Design document discusses full architecture and trade-offs.","status":"tombstone","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T20:38:26.210719+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T20:42:35.150145+05:30","deleted_at":"2026-01-14T20:42:35.150145+05:30","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"opencode-919","title":"3.6: Implement fix loop handling","description":"Add handleAgentFailure() to handoff. Calculate failure fingerprint (SHA-256), check for existing fix task, create fix task if none exists, deduplicate recurring errors.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T12:50:33.726424+05:30","created_by":"buddhi","updated_at":"2026-01-13T14:09:14.195428+05:30","closed_at":"2026-01-13T14:09:14.195428+05:30","dependencies":[{"issue_id":"opencode-919","depends_on_id":"opencode-fn5","type":"blocking","created_at":"2026-01-13T12:53:14.427454+05:30","created_by":"buddhi"}]}
{"id":"opencode-9he","title":"Test","description":"Test TLDR MCP server integration with Claude Code.\n\n**Requirements**:\n- Connect MCP server to Claude Code\n- Test all exposed tools\n- Verify responses are correct\n- Measure latency and reliability\n\n**Implementation**:\n- Configure Claude Code connection\n- Run test queries\n- Verify tool outputs\n- Document results\n\n**Dependencies**:\n- Phase 6 Tasks 1-2","status":"tombstone","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-15T17:07:50.021836+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T21:47:30.491075+05:30","deleted_at":"2026-01-15T21:47:30.491075+05:30","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"opencode-9n9","title":"Update AGENTS.md for TLDR-only semantic search","description":"Update AGENTS.md to reflect TLDR as the only semantic search engine.\n\n**Requirements**:\n- Update semantic-search agent description\n- Remove osgrep from agent list\n- Add TLDR usage guidelines\n- Update any osgrep references\n\n**Implementation**:\n- Modify AGENTS.md\n- Update semantic-search description\n- Remove osgrep mentions\n- Document TLDR-only policy\n\n**Dependencies**:\n- Phase 1 (DONE)","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-15T17:06:17.048058+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T17:58:36.2949+05:30","closed_at":"2026-01-15T17:58:36.294904+05:30"}
{"id":"opencode-9nl","title":"Create","description":"Create client library for communicating with TLDR daemon.\n\n**Requirements**:\n- Implement daemon discovery (check localhost:3000)\n- Implement health check endpoint\n- Implement context extraction API\n- Implement semantic search API\n- Handle daemon startup/shutdown gracefully\n- Add error handling and retry logic\n- Alert user if daemon unavailable (no semantic search fallback)\n\n**Files to create**:\n- lib/tldr-client.mjs\n\n**Dependencies**:\n- Parent: opencode-683\n- Parallel with: opencode-89e, opencode-n1z","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T19:07:12.226148+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T15:22:04.652363+05:30","closed_at":"2026-01-15T15:22:04.652366+05:30"}
{"id":"opencode-9yg","title":"Test","description":"Test TLDR MCP server integration with Claude Desktop.\n\n**Requirements**:\n- Connect MCP server to Claude Desktop\n- Test all exposed tools\n- Verify responses are correct\n- Measure latency and reliability\n\n**Implementation**:\n- Configure Claude Desktop connection\n- Run test queries\n- Verify tool outputs\n- Document results\n\n**Dependencies**:\n- Phase 6 Tasks 1-2","status":"tombstone","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-15T17:07:56.613523+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T21:47:30.491075+05:30","deleted_at":"2026-01-15T21:47:30.491075+05:30","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"opencode-a9c","title":"Update agent/semantic-search.md to use TLDR only","description":"Update agent/semantic-search.md to use TLDR as the only semantic search engine.\n\n**Requirements**:\n- Remove all osgrep references\n- Update tool descriptions\n- Add TLDR usage guidelines\n- Document fall back to grep\n\n**Implementation**:\n- Modify agent/semantic-search.md\n- Remove osgrep fallback language\n- Add TLDR-only policy\n- Test with semantic search agent\n\n**Dependencies**:\n- Phase 1 (DONE)","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-15T17:06:08.843539+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T17:16:58.306584+05:30","closed_at":"2026-01-15T17:16:58.306586+05:30"}
{"id":"opencode-aco","title":"Add","description":"Feature: Automatically prepend ISO 8601 timestamps to all log messages in the codebase","status":"tombstone","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T20:06:21.931285+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T22:05:11.944008+05:30","dependencies":[{"issue_id":"opencode-aco","depends_on_id":"opencode-1ss","type":"blocks","created_at":"2026-01-14T20:06:59.117651+05:30","created_by":"Buddhi De Silva"}],"deleted_at":"2026-01-15T22:05:11.944008+05:30","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"opencode-ayt","title":"Enhance","description":"Update lib/runner/guardrails.js:\n\n1. Change git checkout check to allow beads/task-* branches\n2. Block main, develop, master branches\n3. Block arbitrary branch names (must match beads/task-{id} pattern)\n4. This ensures all work happens in isolated task branches\n5. Update error messages to be clearer about branch restrictions","notes":"Enhanced guardrails to enforce beads/task-{id} branch pattern, blocking main/develop/master","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T17:31:08.422666+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T17:35:21.353008+05:30","closed_at":"2026-01-14T17:35:21.35301+05:30"}
{"id":"opencode-b4c","title":"Remove osgrep model download scripts","description":"Remove osgrep model download scripts from bin/workspace-init.\n\n**Files to modify**:\n- bin/workspace-init\n\n**Implementation**:\n- Remove osgrep model download\n- Remove osgrep model installation\n- Clean up related code\n- Test workspace init still works\n\n**Dependencies**:\n- Phase 1 (DONE)","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-15T17:06:25.613489+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T21:01:10.208348+05:30","closed_at":"2026-01-15T21:01:10.208351+05:30"}
{"id":"opencode-bbm","title":"4.3: Implement progress logging","description":"Add structured progress logging to lib/runner/index.js: Append learnings to progress.txt after each successful stage, store in cass_memory for retrieval.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T12:51:41.724487+05:30","created_by":"buddhi","updated_at":"2026-01-13T14:45:49.341105+05:30","closed_at":"2026-01-13T14:45:49.341108+05:30"}
{"id":"opencode-bgt","title":"{\"title\":\"Implement Squash-on-Green - Atomic history\",\"description\":\"Section 7.2 - Merge Authority agent performs git merge --squash or git commit --amend to hide internal fix loops\",\"priority\":1}","description":"Section 7.2 - Implement Squash-on-Green - Atomic history\n\nRequirements:\n1. Merge Authority agent performs 'git merge --squash' on success\n2. Or use 'git commit --amend' to hide internal fix loops\n3. Only applies to final merge into main\n4. Preserves atomic commits in final history\n5. Hide intermediate \"fix loop\" commits from git log\n\nFiles to modify:\n- lib/runner/handoff.js (merge logic in terminal state)\n- Create agent/merge-authority.md with workflow\n\nSuccess criteria:\n- Final history shows single atomic commit per feature\n- Internal fix loops hidden from git log\n- Squash merge preserves all changes correctly\n- No commit history lost, only consolidated\n\nDependencies:\n- Git workflow with feature branches\n- Terminal state 'complete' or 'merge_authority'\n- Beads task metadata tracking","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T12:28:48.665611+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T13:36:39.721519+05:30","closed_at":"2026-01-14T13:36:39.721519+05:30","close_reason":"Completed"}
{"id":"opencode-bhd","title":"Test agent spawning with correct personas","description":"Create end-to-end test to verify agents load with correct personas when spawned via runner.\n\nTest plan:\n1. Create a simple workflow task in Beads\n2. Spawn runner with workflow type\n3. Verify each agent stage loads its agent/*.md file\n4. Confirm agent appears with correct persona (not 'General')\n5. Check that agent-specific capabilities and instructions are used\n\nExpected behavior:\n- PRD agent loads agent/prd.md\n- Test specialist loads agent/test-specialist.md\n- Fix specialist loads agent/fix-specialist.md\n- Security specialist loads agent/adversarial-reviewer.md","status":"tombstone","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T20:12:52.495875+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T22:05:11.944008+05:30","dependencies":[{"issue_id":"opencode-bhd","depends_on_id":"opencode-m08","type":"discovered-from","created_at":"2026-01-14T20:12:52.497038+05:30","created_by":"Buddhi De Silva"}],"deleted_at":"2026-01-15T22:05:11.944008+05:30","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"opencode-bjl","title":"{\"title\":\"Fix handoff.js import paths\",\"description\":\"Update lib/runner/handoff.js imports to use correct relative paths for tdd-enforcer and smart-context modules\",\"priority\":2}","notes":"Fixed: Handoff.js import paths (duplicate task)","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T14:44:05.302411+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T15:45:01.594987+05:30","closed_at":"2026-01-14T15:45:01.594988+05:30","close_reason":"Import paths fixed. Updated lib/runner/gates.js to import and use lib/runner/gates/tdd-enforcer.js module"}
{"id":"opencode-bsd","title":"Create","description":"Create comprehensive unit tests for TLDR plugin functionality.\n\n**Test coverage**:\n- Plugin initialization\n- Tool registration (tldr_context, tldr_semantic)\n- Client library functions\n- Daemon communication\n- Fallback logic to osgrep\n- Guardrails enforcement\n- Configuration parsing\n- Error handling\n\n**Files to create**:\n- tests/unit/test-tldr-plugin.mjs\n\n**Dependencies**:\n- Parent: opencode-683\n- Requires: opencode-ceu, opencode-dt9 (tools implemented)","status":"closed","priority":3,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T19:07:37.578427+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T16:37:25.346691+05:30","closed_at":"2026-01-15T16:37:25.346696+05:30"}
{"id":"opencode-byp","title":"Implement","status":"closed","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T14:08:11.338977+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T15:25:02.657999+05:30","closed_at":"2026-01-14T15:25:02.657999+05:30","close_reason":"Implemented Agent Runner SDK - Smart Context, TDD Enforcer, CLI entry point, and documentation created. See closed subtasks for details.","labels":["agent","runner","sdk"]}
{"id":"opencode-c8n","title":"TLDR","description":"Weekly task to rebuild the TLDR index to ensure optimal search performance and fresh context injection.\n\n**Steps to Execute:**\n1. Stop TLDR daemon: \n2. Clear existing index: \n3. Rebuild index: \n4. Restart daemon: \n5. Verify health: \n\n**Success Criteria:**\n- Daemon responds to health check within 200ms\n- Index contains all expected sources (verify count)\n- Search returns relevant results (test query)\n- No errors in daemon logs\n\n**Alert Thresholds:**\n- Warning: Rebuild takes >15 minutes\n- Critical: Rebuild takes >30 minutes\n- Critical: Daemon fails health check after restart\n- Critical: Index count differs from expected by >5%\n\n**Owner:** @tldr-maintainer\n\n**Dependencies:**\n- Link to: TLDR Plugin (plugin/tldr.mjs)\n- Link to: TLDR Config (config/tldr.json)","status":"open","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-15T21:12:14.73636+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T21:12:14.73636+05:30","labels":["maintenance","recurring","tldr","weekly"]}
{"id":"opencode-ceu","title":"Implement","description":"Implement tldr_context tool for extracting structured code context.\n\n**Requirements**:\n- Extract AST-level code structure (Layer 1)\n- Implement call graph traversal (Layer 2)\n- Control flow analysis (Layer 3)\n- Data flow analysis (Layer 4)\n- Program dependence (Layer 5)\n- Limit context to maxContextTokens (default 1000)\n- Include guardrails in tool description\n\n**Guardrails**:\n- ⚠️ SCOPE GUARDRAIL: This tool reveals dependencies but does NOT authorize scope expansion\n- TLDR output is informational only\n- Must stop work if impact shows more affected code than task scope\n\n**Tool signature**:\n- Input: filePath, depth, maxTokens\n- Output: Structured context in JSON\n\n**Dependencies**:\n- Parent: opencode-683\n- Requires: opencode-89e, opencode-9nl","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T19:07:16.93453+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T16:37:25.149476+05:30","closed_at":"2026-01-15T16:37:25.149479+05:30"}
{"id":"opencode-chd","title":"Implement test runner for failure fingerprinting tests (Section 5.4)","description":"Create test runner for Handoff Section 5.4 - Failure Fingerprinting tests including create unique fingerprint, deduplicate identical failure, and max retries exceeded. Tests should validate handleAgentFailure() functionality.","status":"closed","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T13:24:51.756338+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T13:31:43.627825+05:30","closed_at":"2026-01-14T13:31:43.627825+05:30","close_reason":"Closed"}
{"id":"opencode-cko","title":"Add","description":"Add npm run coverage and npm run ubs scripts to package.json so the TDD Enforcer and Gatekeeper can execute them. Current status: gates.js tries to run 'npm run ubs' but script doesn't exist.","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T15:54:26.828233+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T15:59:39.571079+05:30","closed_at":"2026-01-14T15:59:39.571079+05:30","close_reason":"Duplicate task - completed in opencode-3is"}
{"id":"opencode-d90","title":"Implement","description":"Create the basic scaffold for the autonomous agent relay architecture including lib/runner/index.js (Harness), lib/runner/gates.js (Gatekeeper), lib/runner/handoff.js (Relay), and basic Pass/Fail loop implementation.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-13T12:25:11.750346+05:30","created_by":"buddhi","updated_at":"2026-01-13T13:04:14.109831+05:30","deleted_at":"2026-01-13T13:04:14.109831+05:30","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"opencode-d9k","title":"Test Task 2","status":"tombstone","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T20:01:14.525012+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T20:01:36.690809+05:30","deleted_at":"2026-01-14T20:01:36.690809+05:30","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"opencode-dcl","title":"1.2: Implement Beads client for Node.js","description":"Create lib/beads-client.js to interface with Beads CLI. Wrapper for bd commands using execAsync(). Methods: create, update, show, list, dep_add, dep_remove.","notes":"Completed: BeadsClient class implemented with all required methods","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T12:48:38.07379+05:30","created_by":"buddhi","updated_at":"2026-01-13T13:25:59.246692+05:30","closed_at":"2026-01-13T13:25:59.246695+05:30"}
{"id":"opencode-dt9","title":"Implement","description":"Implement tldr_semantic tool for semantic code search.\n\n**Requirements**:\n- Implement semantic search using bge-large-en-v1.5 embeddings\n- Query TLDR daemon via semantic search API\n- Alert user if daemon unavailable and fall back to grep\n- Limit results to semanticSearchMaxResults (default 10)\n- Include guardrails in tool description\n\n**Fallback logic**:\n1. Try TLDR semantic search first\n2. If daemon unavailable, alert user and fall back to grep\n3. Never attempt other semantic search tools\n\n**Guardrails**:\n- ⚠️ SEMANTIC SEARCH POLICY: TLDR is ONLY semantic engine\n- Never run multiple semantic tools for same query\n- Alert user if semantic search is unavailable\n\n**Tool signature**:\n- Input: query, maxResults, language\n- Output: Search results with file paths and line numbers\n\n**Dependencies**:\n- Parent: opencode-683\n- Requires: opencode-89e, opencode-9nl","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T19:07:22.856108+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T16:37:25.24882+05:30","closed_at":"2026-01-15T16:37:25.248822+05:30"}
{"id":"opencode-e0h","title":"Document Beads + TLDR workflow","description":"Document the Beads + TLDR workflow for future reference.\n\n**Requirements**:\n- Document impact analysis workflow\n- Document scope detection workflow\n- Document maintenance procedures\n- Provide examples\n\n**Implementation**:\n- Create docs/BEADS-TLDR-WORKFLOW.md\n- Include diagrams\n- Add usage examples\n- Document best practices\n\n**Dependencies**:\n- Phase 1 (DONE)\n- Phase 3 Tasks 1-3","status":"closed","priority":3,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-15T17:05:45.381353+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T21:03:12.3654+05:30","closed_at":"2026-01-15T21:03:12.365403+05:30"}
{"id":"opencode-e7a","title":"Implement test runner for UBS/ESLint gate tests","description":"Create test execution scripts for opencode-test-ci-2.1 through opencode-test-ci-2.4 from testing plan. Location: tests/components/sections-2/lint-gates/ Delivers: - Test files for UBS available/no critical issues - Test files for UBS critical issues - Test files for UBS not available - Test files for ESLint errors","status":"closed","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T00:11:15.179026+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T13:37:29.711929+05:30","closed_at":"2026-01-14T13:37:29.711929+05:30","close_reason":"UBS/ESLint gate tests implemented in tests/components/sections-2/lint-gates/test-lint.mjs. All four tests (2.3.1, 2.3.2, 2.3.3, 2.3.4) are executable and passing."}
{"id":"opencode-ebk","title":"4.6: Implement irreversible action guard","description":"Create plugin/stop-relay.mjs: Detect dangerous operations (--force, schema mods, .beads/ writes), throw IrreversibleActionError, check metadata.irreversible flag.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T12:51:41.727744+05:30","created_by":"buddhi","updated_at":"2026-01-13T14:48:47.265665+05:30","closed_at":"2026-01-13T14:48:47.265665+05:30","close_reason":"Implemented plugin/stop-relay.mjs with IrreversibleActionError class, checkForIrreversibleAction function detecting dangerous patterns, and validateTaskMetadata function enforcing requires_human_approval for irreversible tasks","dependencies":[{"issue_id":"opencode-ebk","depends_on_id":"opencode-5r3","type":"blocking","created_at":"2026-01-13T13:04:53.368403+05:30","created_by":"buddhi"}]}
{"id":"opencode-efq","title":"{\"title\":\"Implement Irreversible Actions Guard\",\"description\":\"Section 7 - Detect metadata.irreversible flag, set status BLOCKED, alert human. Block autonomous execution of schema migrations and data backfills\",\"priority\":1}","description":"Section 7 - Implement Irreversible Actions Guard\n\nRequirements:\n1. Detect metadata.irreversible flag on task startup\n2. If set: Set status BLOCKED, Alert human, Exit workflow\n3. Create specialized migration workflow with 5 phases\n4. Define metadata structure: {irreversible, requires_human_approval, action_type}\n5. Validate action_type is schema_migration or data_backfill\n\n5-Phase Migration Workflow:\n1. Additive Schema (Autonomous): Add nullable columns, safe\n2. Backfill Dry-Run (Autonomous): Validate logic without writes\n3. Execution (BLOCKED): Human must approve and execute\n4. Constraint Enforcement (Autonomous): Add NOT NULL/FKs post-exec\n5. Cleanup (Autonomous): Remove temp columns/data\n\nFiles to modify:\n- lib/runner/handoff.js (add stop relay logic)\n- lib/workflows/migration.js (full 5-phase implementation)\n- lib/runner/index.js (add metadata check)\n\nSuccess criteria:\n- Irreversible tasks BLOCKED automatically\n- Human alerted before any dangerous action\n- 5-phase migration workflow functional\n- Non-irreversible tasks continue normally\n\nDependencies:\n- Beads metadata support\n- Stop relay detection logic\n- Merge authority rule (n7g)","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T12:28:48.652353+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T13:48:33.596449+05:30","closed_at":"2026-01-14T13:48:33.596449+05:30","close_reason":"Completed"}
{"id":"opencode-ej0","title":"1.1: Scaffold lib/runner/ directory structure","description":"Create directory structure for agent runner system: lib/runner/ (main), lib/runner/index.js, lib/runner/gates.js, lib/runner/handoff.js, lib/workflows/, lib/workflows/feature-dev.js","notes":"Completed: Directory structure scaffolded with lib/runner/ and lib/workflows/","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T12:48:38.067417+05:30","created_by":"buddhi","updated_at":"2026-01-13T13:34:59.305409+05:30","closed_at":"2026-01-13T13:34:59.305417+05:30"}
{"id":"opencode-f1a","title":"Implement","description":"Implement the agent.execute.before hook to automatically inject TLDR context before agent execution.\n\n**Requirements**:\n- Extract relevant file paths from user messages\n- Call tldr_context for each relevant file\n- Combine contexts and format as system prompt\n- Inject into agent's systemPrompt\n\n**Implementation**:\n- Enhance existing hook in plugin/tldr.mjs\n- Use extractRelevantFiles() helper\n- Limit to 3 files max per request\n- Handle daemon unavailability gracefully\n\n**Dependencies**:\n- Phase 1 (DONE)","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-15T17:04:26.785792+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T21:19:03.109328+05:30","closed_at":"2026-01-15T21:19:03.109328+05:30","close_reason":"Completed: Finalized agent.execute.before hook"}
{"id":"opencode-fn5","title":"3.3: Implement Beads status updates in handoff","description":"Add updateBeadsStatus() to handoff.js. Update task status during transitions (in_progress, verify_failed, retrying, blocked).","notes":"Completed: updateBeadsStatus() with BeadsClient integration","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T12:50:33.711381+05:30","created_by":"buddhi","updated_at":"2026-01-13T14:05:14.707263+05:30","closed_at":"2026-01-13T14:05:14.707289+05:30","dependencies":[{"issue_id":"opencode-fn5","depends_on_id":"opencode-dcl","type":"blocking","created_at":"2026-01-13T12:53:14.387656+05:30","created_by":"buddhi"}]}
{"id":"opencode-fz9","title":"{\"title\":\"Implement TDD Strict Mode\",\"description\":\"Create lib/runner/gates/tdd-enforcer.js with red-green cycle enforcement\",\"priority\":2}","notes":"Completed: lib/runner/gates/tdd-enforcer.js with verifyTDD, compareTestSnapshots, enforceRedGreenCycle, checkTestCoverage functions","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T14:44:05.301975+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T15:25:02.656268+05:30","closed_at":"2026-01-14T15:25:02.65628+05:30","close_reason":"TDD enforcer module created at lib/runner/gates/tdd-enforcer.js"}
{"id":"opencode-hlw","title":"Register","description":"Add TLDR plugin to opencode.json plugin list.\n\n**Requirements**:\n- Add plugin/tldr.mjs to opencode.json plugins array\n- Ensure proper plugin loading order\n- Verify plugin initialization\n\n**Files to modify**:\n- opencode.json\n\n**Dependencies**:\n- Parent: opencode-683\n- Requires: opencode-89e (plugin file must exist)\n- Requires: opencode-n1z (config must exist)","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T19:07:25.963235+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T22:05:11.169025+05:30","closed_at":"2026-01-15T22:05:11.169025+05:30","close_reason":"Completed: TLDR plugin already registered in opencode.json at line 129"}
{"id":"opencode-hsc","title":"Add","description":"Add Beads tasks for TLDR daemon and index maintenance.\n\n**Requirements**:\n- Create maintenance task for index rebuild\n- Create task for daemon health checks\n- Create task for index optimization\n- Set up recurring schedule\n\n**Implementation**:\n- Add tasks to .beads/\n- Configure recurring tasks\n- Document maintenance procedures\n\n**Dependencies**:\n- Phase 1 (DONE)","status":"closed","priority":3,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-15T17:05:29.966304+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T21:19:02.440324+05:30","closed_at":"2026-01-15T21:19:02.440324+05:30","close_reason":"Completed: Created 4 recurring maintenance tasks"}
{"id":"opencode-i5d","title":"Implement tldr_slice for program slicing","description":"Implement tldr_slice tool for program slicing (debugging-focused code extraction).\n\n**Requirements**:\n- Input: file path and line number\n- Output: slice of code affecting that line\n- Support data and control dependence\n- Limit slice size for readability\n\n**Guardrail**: Program slicing is for DEBUGGING ONLY.\n\n**Implementation**:\n- Add tldr_slice to lib/tldr-client.mjs\n- Add tldr_slice tool to plugin/tldr.mjs\n- Implement CLI call to TLDR daemon\n- Add comprehensive tests\n\n**Dependencies**:\n- Phase 1 (DONE)","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-15T17:07:00.593939+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T17:16:57.817483+05:30","closed_at":"2026-01-15T17:16:57.817486+05:30"}
{"id":"opencode-ies","title":"Add file change detection for incremental updates","description":"Add file change detection to enable incremental TLDR context updates.\n\n**Requirements**:\n- Track which files have been analyzed\n- Detect new/modified files since last analysis\n- Only re-analyze changed files\n- Maintain context cache for unchanged files\n\n**Implementation**:\n- Add file tracking to TLDRMiddleware\n- Use file mtime for change detection\n- Implement cache invalidation logic\n- Test with git status detection\n\n**Dependencies**:\n- Phase 1 (DONE)","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-15T17:04:49.180596+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T18:00:04.589926+05:30","closed_at":"2026-01-15T18:00:04.589929+05:30"}
{"id":"opencode-itl","title":"Test Task 1","status":"tombstone","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T20:00:45.109128+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T20:01:36.690809+05:30","deleted_at":"2026-01-14T20:01:36.690809+05:30","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"opencode-j2t","title":"Implement test runner for multiple gates tests","description":"Create test execution scripts for opencode-test-ci-2.1 from testing plan. Location: tests/components/sections-2/multiple-gates/ Delivers: - Test files for all gates pass - Test files for one gate fails - Test files for unknown gate","status":"closed","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T00:11:15.178528+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T13:37:29.709709+05:30","closed_at":"2026-01-14T13:37:29.709709+05:30","close_reason":"Multiple gates tests implemented in tests/components/sections-2/multiple-gates/test-multiple-gates.mjs. All three tests (2.4.1, 2.4.2, 2.4.3) are executable and passing."}
{"id":"opencode-jjb","title":"Implement test runner for next state determination tests (Section 5.2)","description":"Create test runner for Handoff Section 5.2 - Next State Determination tests including all gates passed, gates failed, and invalid state. Extend existing test-handoff.mjs. Tests should validate determineNextState() functionality.","status":"closed","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T13:24:51.743162+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T13:28:18.101363+05:30","closed_at":"2026-01-14T13:28:18.101363+05:30","close_reason":"Closed"}
{"id":"opencode-jpn","title":"Integrate","description":"Integrate tldr_impact with Beads dependency tracking for automatic scope detection.\n\n**Requirements**:\n- When creating task, run tldr_impact on target files\n- Store impact analysis in task context\n- Display impacted files in task details\n- Validate task scope against impact\n\n**Implementation**:\n- Update lib/beads-tldr.mjs\n- Add impact analysis to task creation\n- Display impact in task output\n- Add validation hook\n\n**Dependencies**:\n- Phase 1 (DONE)","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-15T17:05:13.016216+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T21:19:00.266233+05:30","closed_at":"2026-01-15T21:19:00.266233+05:30","close_reason":"Completed: Integrated tldr_impact with Beads dependency tracking"}
{"id":"opencode-k2a","title":"Implement test runner for guardrails initialization tests","description":"Create test execution scripts for opencode-test-ci-1.2 from testing plan. Location: tests/components/sections-1/2-guardrails-init/ Delivers: - Test files for guardrails initialization - GuardrailException handling - Task context setup","status":"closed","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T00:10:42.886423+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T13:14:04.294794+05:30","closed_at":"2026-01-14T13:14:04.294794+05:30","close_reason":"Closed"}
{"id":"opencode-la2","title":"Implement test runner for Beads status update tests (Section 5.3)","description":"Create test runner for Handoff Section 5.3 - Beads Status Update tests including update task status and update failed. Tests should validate updateBeadsStatus() functionality with graceful degradation.","status":"closed","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T13:24:51.745009+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T13:29:55.530252+05:30","closed_at":"2026-01-14T13:29:55.530252+05:30","close_reason":"Closed"}
{"id":"opencode-lfv","title":"Implement Smart Context - Stack Trace Slicing","notes":"Completed: lib/runner/smart-context.js (duplicate task)","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T14:43:40.833558+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T15:25:02.656862+05:30","closed_at":"2026-01-14T15:25:02.656863+05:30","close_reason":"Implemented lib/runner/smart-context.js with stack trace slicing functionality including distillSmartContext, sliceStackTrace, formatErrorForAgent, and extractContextSlice functions"}
{"id":"opencode-lwy","title":"Remove osgrep from system diagnostics","description":"Remove osgrep from system diagnostics in plugin/setup.mjs.\n\n**Files to modify**:\n- plugin/setup.mjs\n- Any diagnostics modules\n\n**Implementation**:\n- Remove osgrep health check\n- Add TLDR health check\n- Update diagnostic output\n- Test diagnostics work\n\n**Dependencies**:\n- Phase 1 (DONE)","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-15T17:06:00.396048+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T17:58:36.199429+05:30","closed_at":"2026-01-15T17:58:36.199433+05:30"}
{"id":"opencode-m08","title":"Fix agent persona loading in runner","description":"Investigate and fix why subagents are spawning as 'General' instead of their specialized types.\n\nIssue: When opencode spawns subagents via runner, they don't load their agent/*.md persona files, causing them to appear as 'General' rather than their specialized types (e.g., 'test-specialist', 'fix-specialist').\n\nRoot causes identified:\n1. Agent markdown files (agent/*.md) are never loaded by runner\n2. Workflow agent names don't match available agent files (e.g., 'implementation-specialist' doesn't exist)\n\nTasks:\n1. Create agent loader utility (lib/runner/agent-loader.js) - DONE\n2. Update runAgent() to load agent persona and inject into prompt - PARTIALLY DONE\n3. Map workflow agent names to actual agent files - NEEDED\n4. Test agent spawning with correct personas - NEEDED\n\nFiles involved:\n- lib/runner/index.js\n- lib/runner/agent-loader.js (new)\n- lib/workflows/feature-dev.js","notes":"Implementation completed in PR #28:\n- Created lib/runner/agent-loader.js (150 lines)\n- Updated lib/runner/index.js to load agent personas\n- Implemented agent name mapping for workflow agents\n\nPR: https://github.com/haulmatic-dev/opencode-config/pull/28\n\nReady for code review and merge.","status":"tombstone","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T20:12:06.082+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T22:05:11.944008+05:30","deleted_at":"2026-01-15T22:05:11.944008+05:30","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"opencode-m6i","title":"1.4: Implement basic Runner harness","description":"Create main harness in lib/runner/index.js. Context setup: Checkout task branch. Context distillation: Parse errors/logs. Agent invocation: Use OpencodeSDK.session.prompt.","notes":"Completed: Basic harness with runAgent(), distillContext(), main()","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T12:48:38.071212+05:30","created_by":"buddhi","updated_at":"2026-01-13T14:22:27.773212+05:30","closed_at":"2026-01-13T14:22:27.773214+05:30","dependencies":[{"issue_id":"opencode-m6i","depends_on_id":"opencode-4o7","type":"blocking","created_at":"2026-01-13T12:52:27.407972+05:30","created_by":"buddhi"},{"issue_id":"opencode-m6i","depends_on_id":"opencode-dcl","type":"blocking","created_at":"2026-01-13T12:52:41.247094+05:30","created_by":"buddhi"}]}
{"id":"opencode-mw3","title":"Implement test runner for mutation gate tests","description":"Create test execution scripts for opencode-test-ci-2.1 through opencode-test-ci-2.3 from testing plan. Location: tests/components/sections-2/mutation-gates/ Delivers: - Test files for score above threshold - Test files for score below threshold - Test files for stryker not installed","status":"closed","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T00:11:15.181856+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T13:37:29.708142+05:30","closed_at":"2026-01-14T13:37:29.708142+05:30","close_reason":"Mutation gate tests implemented in tests/components/sections-2/mutation-gates/test-mutation.mjs. All three tests (2.2.1, 2.2.2, 2.2.3) are executable and passing."}
{"id":"opencode-mws","title":"Install js-yaml dependency","description":"Install js-yaml package for parsing YAML frontmatter in agent files.\n\nCommand: npm install js-yaml\n\nThis is required by:\n- lib/runner/agent-loader-registry.js\n\nAdd to package.json:\ndependencies:\n  js-yaml: ^4.1.0\n\nRun after: Create agent-loader-registry.js","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T20:40:24.315209+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T20:45:34.070935+05:30","closed_at":"2026-01-14T20:45:34.070946+05:30"}
{"id":"opencode-n1z","title":"Create","description":"Create configuration file for TLDR plugin.\n\n**Requirements**:\n- Follow existing config pattern (see config/cass_config.json)\n- Include all documented configuration options\n- Set sensible defaults for production\n- Enable auto-inject and diagnostics by default\n\n**Configuration options**:\n- enabled: true\n- autoInject: true\n- contextDepth: 2\n- maxContextTokens: 1000\n- diagnosticsOnEdit: true\n- semanticSearchMaxResults: 10\n\n**Files to create**:\n- config/tldr.json\n\n**Dependencies**:\n- Parent: opencode-683\n- After: opencode-89e (plugin file must exist first)","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T19:07:02.282443+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T15:22:04.548861+05:30","closed_at":"2026-01-15T15:22:04.548864+05:30"}
{"id":"opencode-n7g","title":"{\"title\":\"Implement Merge Authority Rule - Auto-merge blocking\",\"description\":\"Section 7.4 - Never auto-merge if metadata.irreversible === true. Block until approval granted\",\"priority\":1}","description":"Section 7.4 - Implement Merge Authority Rule - Auto-merge blocking\n\nRequirements:\n1. Explicit rule: Never auto-merge if metadata.irreversible === true\n2. Block autonomous execution until human approval granted\n3. Check task metadata before any merge operation\n4. Set status BLOCKED and alert human for irreversible actions\n5. Resume workflow only after metadata.approval_granted = true\n\nFiles to modify:\n- lib/runner/handoff.js (add check in merge logic)\n- lib/runner/index.js (check in workflow loop)\n\nSuccess criteria:\n- Auto-merge blocked for irreversible actions\n- Human alerted with clear reason\n- Manual approval workflow works\n- Non-irreversible tasks merge normally\n\nDependencies:\n- Beads task metadata structure\n- Irreversible action guard (efq)\n- Merge authority logic (bgt)","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T12:28:48.654061+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T13:40:50.528043+05:30","closed_at":"2026-01-14T13:40:50.528043+05:30","close_reason":"Completed"}
{"id":"opencode-ncl","title":"Implement test runner framework","description":"Create test harness, execution engine, result validator, log capture, test reporter","notes":"Completed: Test runner framework with vitest, 14 tests passing, coverage for smart-context and tdd-enforcer modules","status":"closed","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T00:09:41.847968+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T15:45:01.594131+05:30","closed_at":"2026-01-14T15:45:01.594141+05:30"}
{"id":"opencode-od3","title":"Add","description":"Create comprehensive integration tests that validate the complete workflow: planning -> coding -> testing -> security_audit -> complete. Tests should:\n1. Spawn actual runner processes via bin/runner\n2. Verify handoff between agents\n3. Validate gate failures trigger retry loops\n4. Confirm success path completes all stages\n5. Test irreversible action blocking (migration workflow)","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T15:54:26.82824+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T15:59:39.568524+05:30","closed_at":"2026-01-14T15:59:39.568524+05:30","close_reason":"Duplicate"}
{"id":"opencode-odp","title":"Enhance specialized agents","description":"Review and enhance adversarial-reviewer, fix-specialist, conflict-resolver agents","notes":"Enhanced adversarial-reviewer, fix-specialist, conflict-resolver agents with smart context integration","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T15:54:32.803268+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T15:59:23.993813+05:30","closed_at":"2026-01-14T15:59:23.993814+05:30"}
{"id":"opencode-ofe","title":"{\"title\":\"Implement Smart Context - Stack Trace Slicing\",\"description\":\"Create lib/runner/smart-context.js with stack trace slicing for optimized prompts\",\"priority\":2}","notes":"Completed: lib/runner/smart-context.js with distillSmartContext, sliceStackTrace, formatErrorForAgent, extractContextSlice functions","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T14:44:05.313878+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T15:25:02.65911+05:30","closed_at":"2026-01-14T15:25:02.659111+05:30","close_reason":"Implemented lib/runner/smart-context.js with stack trace slicing functionality including distillSmartContext, sliceStackTrace, formatErrorForAgent, and extractContextSlice functions"}
{"id":"opencode-os1","title":"Implement test runner for progress logging tests","description":"Create test execution scripts for opencode-test-ci-1.5 from testing plan. Location: tests/components/sections-1/5-progress-logging/ Delivers: - Test files for success logging - Test files for reading progress logs","status":"closed","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T00:11:15.192699+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T13:16:31.653421+05:30","closed_at":"2026-01-14T13:16:31.653421+05:30","close_reason":"Closed"}
{"id":"opencode-ouy","title":"Add","description":"Create stryker.conf.js or update package.json to support mutation testing. The Gatekeeper's verifyMutation() function references 'npx stryker run' but stryker may not be configured for this codebase.","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T15:54:26.842272+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T15:59:39.6021+05:30","closed_at":"2026-01-14T15:59:39.6021+05:30","close_reason":"Duplicate"}
{"id":"opencode-p9l","title":"Implement","description":"Add reactive rebase check to lib/runner/handoff.js:\n\n1. On runner startup (before handoff), check if rebase is needed\n2. Call lib/runner/rebase.js:checkNeedsRebase()\n3. If rebase needed, perform it automatically\n4. Handle conflicts by spawning conflict-resolver agent\n5. On success, resume normal handoff execution\n\nThis prevents merge conflicts and keeps task branches up-to-date with main.","notes":"Verified reactive rebase already implemented in handoff.js (lines 364-408) - all requirements met","status":"closed","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T17:31:08.404134+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T17:35:21.349173+05:30","closed_at":"2026-01-14T17:35:21.349178+05:30"}
{"id":"opencode-p9t","title":"Register","description":"Register TLDR MCP server in Claude Desktop and Claude Code configuration.\n\n**Requirements**:\n- Add MCP server to claude_desktop_config.json\n- Add MCP server to .claude/settings.json\n- Configure server command and args\n- Verify connection works\n\n**Implementation**:\n- Create MCP config files\n- Add to appropriate directories\n- Test connection\n- Document configuration\n\n**Dependencies**:\n- Phase 6 Task 1","status":"tombstone","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-15T17:07:43.037172+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T21:47:30.491075+05:30","deleted_at":"2026-01-15T21:47:30.491075+05:30","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"opencode-psg","title":"Implement test runner for CLI argument parsing tests","description":"Create test execution scripts for opencode-test-ci-1.1 through opencode-test-ci-1.3 from testing plan. Location: tests/components/sections-1/1-cli-args/ Delivers: - Test files for CLI argument parsing - Mock data for test scenarios - Expected results validation","status":"closed","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T00:10:42.887883+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T13:13:38.3874+05:30","closed_at":"2026-01-14T13:13:38.3874+05:30","close_reason":"Closed"}
{"id":"opencode-qe8","title":"3.5: Integrate gates with relay","description":"Connect gates.js to handoff. Run gates specified in workflow config after agent completes, pass gate results to determineNextState.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T12:50:33.710771+05:30","created_by":"buddhi","updated_at":"2026-01-13T14:09:53.3307+05:30","closed_at":"2026-01-13T14:09:53.3307+05:30","dependencies":[{"issue_id":"opencode-qe8","depends_on_id":"opencode-1i3","type":"blocking","created_at":"2026-01-13T12:53:14.385374+05:30","created_by":"buddhi"},{"issue_id":"opencode-qe8","depends_on_id":"opencode-3ew","type":"blocking","created_at":"2026-01-13T12:53:14.493372+05:30","created_by":"buddhi"}]}
{"id":"opencode-qh8","title":"Integrate test framework with actual implementations","notes":"Completed: Integration tests for workflow execution, handoff between agents, gates and retry loops","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T14:43:40.833556+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T15:45:01.594194+05:30","closed_at":"2026-01-14T15:45:01.594196+05:30"}
{"id":"opencode-quc","title":"Update beads-tools.mjs to use TLDR","description":"Update beads-tools.mjs to use TLDR for code analysis where applicable.\n\n**Requirements**:\n- Replace osgrep calls with tldr_semantic\n- Use tldr_context for code analysis\n- Use tldr_impact for scope detection\n- Update all tool descriptions\n\n**Implementation**:\n- Modify lib/beads-tools.mjs\n- Add TLDR client integration\n- Update function signatures\n- Test with real workflows\n\n**Dependencies**:\n- Phase 1 (DONE)","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-15T17:05:37.997899+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T17:16:57.718513+05:30","closed_at":"2026-01-15T17:16:57.718522+05:30"}
{"id":"opencode-r0m","title":"Implement test runner for git commit validation tests (Section 3.2)","description":"Create test runner for Guardrails Section 3.2 - Git Commit Validation tests including deny commit without task ID and allow commit with task ID. Tests should validate checkGitCommit() functionality.","status":"closed","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T13:24:51.767724+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T13:25:29.928988+05:30","closed_at":"2026-01-14T13:25:29.928988+05:30","close_reason":"Closed"}
{"id":"opencode-r78","title":"Test agent registry end-to-end","notes":"All tests pass:\n✅ Test 1: Valid canonical ID loads correctly\n✅ Test 2: Alias resolution works (testing-specialist -> test-specialist)\n✅ Test 3: Multiple aliases work (prd-agent -> prd)\n✅ Test 4: Invalid agent IDs throw helpful errors\n✅ Test 5: Agent formatting for prompt works (453 chars for test-specialist)\n\nPersona extraction is working - test-specialist shows 436 chars of persona text.","status":"closed","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T20:40:51.759144+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T14:18:40.52925+05:30","closed_at":"2026-01-15T14:18:40.529253+05:30","dependencies":[{"issue_id":"opencode-r78","depends_on_id":"opencode-wid","type":"blocks","created_at":"2026-01-14T20:42:49.31782+05:30","created_by":"Buddhi De Silva"},{"issue_id":"opencode-r78","depends_on_id":"opencode-xie","type":"blocks","created_at":"2026-01-14T20:42:49.426514+05:30","created_by":"Buddhi De Silva"}]}
{"id":"opencode-rh3","title":"{\"title\":\"Implement Graph Compaction - Unblock dependent tasks\",\"description\":\"Section 8 - When Root Cause task resolves, automatically identify and unblock all tasks waiting on that fingerprint\",\"priority\":1}","description":"Section 8 - Implement Graph Compaction - Unblock dependent tasks\n\nRequirements:\n1. When Root Cause task resolves, auto-unblock dependent tasks\n2. Query Beads for tasks blocked on specific fingerprint\n3. Move tasks from BLOCKED to READY state\n4. Trigger retry workflow for unblocked tasks\n5. Log compaction actions for audit\n\nAlgorithm:\n- On task completion: Get failure fingerprint\n- Query: SELECT * FROM tasks WHERE status='BLOCKED' AND notes CONTAINS fingerprint\n- For each dependent: Update status to 'READY', set notes to 'Root cause resolved'\n- Optionally trigger workflow restart for ready tasks\n\nFiles to modify:\n- lib/runner/handoff.js (add compaction function)\n- lib/beads-client.mjs (query by fingerprint)\n- Create lib/runner/compaction.js\n\nSuccess criteria:\n- Dependent tasks auto-unblocked when root cause resolves\n- Fingerprint matching is accurate\n- No tasks orphaned\n- Compaction logged for audit trail\n\nDependencies:\n- Failure fingerprinting (already implemented in handoff.js:169-175)\n- Beads query capabilities\n- Task status management","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T12:28:58.962371+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T13:31:08.578669+05:30","closed_at":"2026-01-14T13:31:08.578669+05:30","close_reason":"Completed"}
{"id":"opencode-s76","title":"Enhance","description":"Fix progress.txt integration in lib/runner/index.js:\n\n1. Import distillSmartContext from correct module (lib/runner/smart-context.js)\n2. Use progress.txt data to prime next agent context\n3. Append structured learnings after each stage completion\n4. Read progress.txt during context distillation phase\n5. This ensures agents benefit from previous stages' learnings","notes":"Enhanced progress.txt integration with learnings, errors, code slices in formatContextForPrompt","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T17:31:08.404093+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T17:35:21.375138+05:30","closed_at":"2026-01-14T17:35:21.37514+05:30","close_reason":"Fixed progress.txt integration: enhanced logProgress to include stage completion, errors, and code slices; updated formatContextForPrompt to incorporate progress.txt learnings"}
{"id":"opencode-sgp","title":"Implement tldr_dead for dead code detection","description":"Implement tldr_dead tool for dead code detection.\n\n**Requirements**:\n- Input: project root or file\n- Output: list of dead code\n- Detect unreachable functions\n- Detect unused variables\n- Detect uncalled functions\n\n**Implementation**:\n- Add tldr_dead to lib/tldr-client.mjs\n- Add tldr_dead tool to plugin/tldr.mjs\n- Implement CLI call to TLDR daemon\n- Add comprehensive tests\n\n**Dependencies**:\n- Phase 1 (DONE)","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-15T17:07:29.051152+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T17:16:58.207596+05:30","closed_at":"2026-01-15T17:16:58.2076+05:30"}
{"id":"opencode-smh","title":"{\"title\":\"Implement 5-Phase Migration Workflow\",\"description\":\"Section 7.3 - Full implementation: 1. Additive Schema, 2. Backfill Dry-Run, 3. Execution (BLOCKED), 4. Constraint Enforcement, 5. Cleanup\",\"priority\":1}","description":"Section 7.3 - Implement 5-Phase Migration Workflow\n\nRequirements:\nFull implementation of specialized migration workflow with 5 phases:\n\nPhase 1 - Additive Schema (Autonomous):\n- Add nullable columns only\n- Safe, non-breaking changes\n- Can run without human intervention\n\nPhase 2 - Backfill Dry-Run (Autonomous):\n- Validate backfill logic without writes\n- Test data transformation\n- Verify performance estimates\n\nPhase 3 - Execution (BLOCKED):\n- Human must approve and execute\n- Actual data modification\n- Manual trigger required\n\nPhase 4 - Constraint Enforcement (Autonomous):\n- Add NOT NULL constraints post-execution\n- Add foreign keys after data validated\n- Finalize schema\n\nPhase 5 - Cleanup (Autonomous):\n- Remove temp columns/data\n- Clean up migration artifacts\n- Mark migration complete\n\nFiles to create/modify:\n- lib/workflows/migration.js (implement 5-phase state machine)\n- Add transitions: additive_schema -> backfill_dryrun -> execution -> constraint_enforcement -> cleanup\n- Add blocking logic for execution phase\n\nSuccess criteria:\n- All 5 phases execute in order\n- Execution phase BLOCKED until human approval\n- Phases 1,2,4,5 run autonomously\n- State transitions tracked in Beads\n\nDependencies:\n- Irreversible Actions Guard (efq)\n- Beads client\n- Schema validation utilities","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T12:28:48.65293+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T13:43:15.537741+05:30","closed_at":"2026-01-14T13:43:15.537741+05:30","close_reason":"Completed"}
{"id":"opencode-swz","title":"Update README.md with TLDR integration","description":"Update README.md to reflect TLDR integration and osgrep removal.\n\n**Requirements**:\n- Update tool list\n- Remove osgrep mentions\n- Add TLDR documentation link\n- Update installation instructions\n\n**Implementation**:\n- Modify README.md\n- Add TLDR to features\n- Remove osgrep from tools\n- Update setup instructions\n\n**Dependencies**:\n- Phase 1 (DONE)","status":"closed","priority":3,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-15T17:06:32.303595+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T21:03:12.460542+05:30","closed_at":"2026-01-15T21:03:12.460556+05:30"}
{"id":"opencode-tfz","title":"Create tldr_change_impact tool for selective testing","description":"Create tldr_change_impact tool for selective testing based on file changes.\n\n**Requirements**:\n- Input: list of changed files\n- Output: which tests to run\n- Consider call graph for test selection\n- Prioritize critical path tests\n\n**Implementation**:\n- Add to plugin/tldr.mjs tools\n- Analyze test file connections\n- Output recommended test subset\n- Integrate with test runner\n\n**Dependencies**:\n- Phase 1 (DONE)","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-15T17:05:21.837556+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T21:01:10.110907+05:30","closed_at":"2026-01-15T21:01:10.110917+05:30"}
{"id":"opencode-tqg","title":"Implement","description":"Create test infrastructure that can execute and validate test cases for the autonomous agent relay architecture. Includes:\n\n1. Test harness framework - main entry point for running tests\n2. Test execution engine - ability to run individual or groups of tests\n3. Result validator - validate test pass/fail against expected outcomes\n4. Log capture - capture console output, errors, and test metadata\n5. Test reporting - generate summary reports with pass/fail rates\n\n\nLocation:  directory\n\nDeliverables:\n-  - Main test entry point\n-  - Test execution engine\n-  - Result validation utilities\n-  - Test reporting generator\n\n-  scripts for running test suites\n\nPriority: 1","status":"closed","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T00:07:48.99698+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T14:22:45.927777+05:30","closed_at":"2026-01-14T14:22:45.927777+05:30","close_reason":"Closed"}
{"id":"opencode-u1j","title":"Implement test runner for task execution loop tests","description":"Create test execution scripts for opencode-test-ci-1.3 through opencode-test-ci-1.5 from testing plan. Location: tests/components/sections-1/3-execution-loop/ Delivers: - Test files for single-state workflow - Test files for multi-state workflow - Max iterations guard tests","status":"closed","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T00:10:42.899317+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T13:14:41.839035+05:30","closed_at":"2026-01-14T13:14:41.839035+05:30","close_reason":"Closed"}
{"id":"opencode-u97","title":"3.4: Implement process spawning with timeout","description":"Add spawnAgent() and waitForCompletion() to handoff.js. Use child_process.spawn(), pipe stdout/stderr, handle exit codes, implement timeout with AbortController.","notes":"Completed: spawnAgent() and waitForCompletion() with AbortController timeout","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T12:50:33.718487+05:30","created_by":"buddhi","updated_at":"2026-01-13T14:05:14.742647+05:30","closed_at":"2026-01-13T14:05:14.742651+05:30","dependencies":[{"issue_id":"opencode-u97","depends_on_id":"opencode-4c1","type":"blocking","created_at":"2026-01-13T12:53:14.398164+05:30","created_by":"buddhi"}]}
{"id":"opencode-v9z","title":"2.5: Implement command interceptors (guardrails)","description":"Create lib/runner/guardrails.js. Intercept file writes (deny if no task_id, deny .beads/), git commits, git checkout (deny main/develop).","notes":"Completed: Guardrails implemented with CommandInterceptor class","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T12:50:10.083657+05:30","created_by":"buddhi","updated_at":"2026-01-13T14:21:41.222142+05:30","closed_at":"2026-01-13T14:21:41.222145+05:30","close_reason":"Closed"}
{"id":"opencode-vap","title":"Implement test runner for timeout handling tests (Section 5.1.2)","description":"Create test runner for Handoff Section 5.1.2 - Timeout Handling tests including timeout detection, timeout error handling, and graceful degradation. Tests should validate waitForCompletion() timeout functionality.","status":"closed","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T13:24:51.746692+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T13:27:44.825065+05:30","closed_at":"2026-01-14T13:27:44.825065+05:30","close_reason":"Closed"}
{"id":"opencode-vfc","title":"4.5: Implement graph compaction","description":"Create lib/graph-compactor.mjs: Traverse dependency graph when root cause resolves, unblock dependent tasks (bd dep remove), cascade status updates topologically.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T12:51:41.725188+05:30","created_by":"buddhi","updated_at":"2026-01-13T14:45:26.921842+05:30","closed_at":"2026-01-13T14:45:26.921845+05:30","dependencies":[{"issue_id":"opencode-vfc","depends_on_id":"opencode-dcl","type":"blocking","created_at":"2026-01-13T12:52:59.629294+05:30","created_by":"buddhi"},{"issue_id":"opencode-vfc","depends_on_id":"opencode-2i0","type":"blocking","created_at":"2026-01-13T12:52:59.771786+05:30","created_by":"buddhi"}]}
{"id":"opencode-vhz","title":"Implement test runner for git checkout blocking tests (Section 3.3)","description":"Create test runner for Guardrails Section 3.3 - Git Checkout Blocking tests including deny checkout to main/develop/master and allow checkout to task branch. Tests should validate checkGitCheckout() functionality.","status":"closed","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T13:24:51.746809+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T13:25:47.842384+05:30","closed_at":"2026-01-14T13:25:47.842384+05:30","close_reason":"Closed"}
{"id":"opencode-vsd","title":"Fix handoff.js import paths for missing modules","notes":"Fixed: Updated lib/runner/gates.js imports to use ./gates/tdd-enforcer.js","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T14:43:40.848451+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T15:45:01.595343+05:30","closed_at":"2026-01-14T15:45:01.595345+05:30","close_reason":"Import paths verified and fixed. The tdd-enforcer.js module is now correctly imported in lib/runner/gates.js"}
{"id":"opencode-wid","title":"Update runner index.js to use new loader","description":"Modify lib/runner/index.js to use new agent-loader-registry.js instead of old agent-loader.js.\n\nChanges:\n1. Update import: from './agent-loader' to './agent-loader-registry'\n2. Update loadAgent call: await loadAgentByName() becomes await loadAgent()\n3. Verify formatAgentForPrompt is imported correctly\n4. Test that agent persona is injected into prompt\n\nNo changes to lib/runner/agent-loader.js needed initially (kept for rollback).\n\nRelated workflow:\n- Run after agent-loader-registry.js is complete\n- Test with a sample workflow task","status":"closed","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T20:40:03.294012+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T21:16:15.068123+05:30","closed_at":"2026-01-14T21:16:15.068125+05:30","dependencies":[{"issue_id":"opencode-wid","depends_on_id":"opencode-7do","type":"blocks","created_at":"2026-01-14T20:42:49.211328+05:30","created_by":"Buddhi De Silva"}]}
{"id":"opencode-xie","title":"Add YAML frontmatter to agent files","description":"Update all existing agent/*.md files to include YAML frontmatter with id and aliases.\n\nAgents to update:\n1. agent/prd.md\n   - id: prd\n   - aliases: [prd-agent]\n\n2. agent/test-specialist.md\n   - id: test-specialist\n   - aliases: [testing-specialist]\n\n3. agent/fix-specialist.md\n   - id: fix-specialist\n   - aliases: [fixing-specialist]\n\n4. agent/adversarial-reviewer.md\n   - id: adversarial-reviewer\n   - aliases: [security-specialist]\n\n5. agent/orchestrator.md\n   - id: orchestrator\n   - aliases: [implementation-specialist]\n\n6. agent/deployment-specialist.md\n   - id: deployment-specialist\n   - (no aliases needed)\n\n7. agent/code-reviewer.md\n   - id: code-reviewer\n   - (no aliases needed)\n\n8. agent/figma-design-extractor.md\n   - id: figma-design-extractor\n   - (no aliases needed)\n\nFrontmatter format:\n---\nid: <canonical-id>\naliases:\n  - <alias-1>\n  - <alias-2>\n---\n\nUpdate all files with correct frontmatter structure at the top of each file.","notes":"Updated frontmatter for agents used in workflow:\n- prd.md (id: prd, alias: prd-agent)\n- test-specialist.md (id: test-specialist, alias: testing-specialist)\n- fix-specialist.md (id: fix-specialist, alias: fixing-specialist)\n- adversarial-reviewer.md (id: adversarial-reviewer, alias: security-specialist)\n- orchestrator.md (id: orchestrator, alias: implementation-specialist)\n\nAlso added id to:\n- deployment-specialist.md\n- code-reviewer.md\n- figma-design-extractor.md\n- All research droids with proper ids\n\nResearch droids not used in workflows kept as subagents.","status":"closed","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T20:38:58.394876+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T21:16:14.877658+05:30","closed_at":"2026-01-14T21:16:14.877661+05:30"}
{"id":"opencode-y4w","title":"2.3: Integrate UBS for linting","description":"Add verifyLint() to gates.js. Run UBS (Ultimate Bug Scanner) and eslint on modified files. Fail on security issues.","notes":"Completed: verifyLint() with UBS and eslint integration","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T12:49:17.400296+05:30","created_by":"buddhi","updated_at":"2026-01-13T13:36:54.975555+05:30","closed_at":"2026-01-13T13:36:54.975557+05:30","dependencies":[{"issue_id":"opencode-y4w","depends_on_id":"opencode-m6i","type":"blocking","created_at":"2026-01-13T12:52:47.643684+05:30","created_by":"buddhi"}]}
{"id":"opencode-yp3","title":"Implement TDD Strict Mode - Old vs New Code Comparison","notes":"Completed: lib/runner/gates/tdd-enforcer.js (duplicate task)","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T14:43:40.832179+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T15:25:02.681651+05:30","closed_at":"2026-01-14T15:25:02.681654+05:30","close_reason":"TDD enforcer module created with red-green cycle validation"}
{"id":"opencode-zbx","title":"TLDR","description":"Monthly task to audit context injection quality and relevance.\n\n**Steps to Execute:**\n1. Export context logs: \n2. Sample 10 agent runs: Randomly select from logs\n3. Review each context injection: Rate relevance 1-5\n4. Calculate average score: Sum scores / total samples\n5. Document findings: Update \n\n**Success Criteria:**\n- Average relevance score: >4/5\n- No single injection scored: <2/5\n- Context relevance trend: Stable or improving\n- Coverage: All expected source types included\n\n**Alert Thresholds:**\n- Warning: Average score 3.5-4.0\n- Critical: Average score <3.5\n- Critical: Any injection scored 1/5\n- Warning: Coverage gap detected\n\n**Scoring Rubric:**\n- 5: Perfect match, highly relevant\n- 4: Mostly relevant, minor noise\n- 3: Partially relevant, some noise\n- 2: Minimally relevant, mostly noise\n- 1: Not relevant at all\n\n**Owner:** @tldr-maintainer\n\n**Dependencies:**\n- Link to: TLDR Context Injector (plugin/tldr.mjs:injectContext)\n- Link to: TLDR Quality Metrics (.tldr/quality/metrics.json)","status":"open","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-15T21:12:35.834263+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T21:12:35.834263+05:30","labels":["maintenance","monthly","recurring","tldr"]}
{"id":"opencode-zhy","title":"Implement","description":"Implement test execution scripts for Sections 1-5 of testing plan:\n\n## Section 1: Core Runner Tests (lib/runner/index.js)\n- opencode-test-ci-1.1: Test CLI argument parsing (required args, valid args, workflow arg)\n- opencode-test-ci-1.2: Test guardrails initialization\n- opencode-test-ci-1.3: Test task execution loop (single state, multi-state, max iterations)\n- opencode-test-ci-1.4: Test context distillation (basic extraction, size limits)\n- opencode-test-ci-1.5: Test progress logging (success logging, read logs)\n\n## Section 2: Quality Gates Tests (lib/runner/gates.js)\n- opencode-test-ci-2.1: Test TDD gate (compliant, violation, no tests)\n- opencode-test-ci-2.2: Test mutation gate (score above/below threshold, stryker not installed)\n- opencode-test-ci-2.3: Test lint gate (UBS available/no critical, UBS not available, ESLint errors)\n- opencode-test-ci-2.4: Test multiple gates execution (all pass, one fail, unknown gate)\n\n## Section 3: Guardrails Tests (lib/runner/guardrails.js)\n- opencode-test-ci-3.1: Test file write interception (deny .beads/, deny no task ID, allow with task ID)\n- opencode-test-ci-3.2: Test git commit validation (deny without task ID, allow with task ID)\n- opencode-test-ci-3.3: Test git checkout blocking (deny main/develop/master, allow task branch)\n\n## Section 4: Workflow State Machine Tests (lib/workflows/feature-dev.js)\n- opencode-test-ci-4.1: Test state transitions (planning→coding, coding→testing, terminal states)\n- opencode-test-ci-4.2: Test retry budgets (security 1 attempt, lint 3 attempts)\n\n## Section 5: Handoff/Relay Tests (lib/runner/handoff.js)\n- opencode-test-ci-5.1: Test agent spawning (process spawn, timeout, successful exit, error exit)\n- opencode-test-ci-5.2: Test next state determination (gates pass, gates fail, invalid state)\n- opencode-test-ci-5.3: Test Beads status updates (update status, update failed)\n- opencode-test-ci-5.4: Test failure fingerprinting (unique fingerprint, deduplication, max retries)\n- opencode-test-ci-5.5: Test full handoff execution (successful workflow, workflow with gate failure)\n\nLocation: \nDeliverables:\n- Individual test files for each test case in sections-1-5/\n- Test utilities shared across components\n- Mock data for test scenarios\n- Expected results and validation files","status":"closed","priority":1,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T00:08:00.875476+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T14:22:45.821423+05:30","closed_at":"2026-01-14T14:22:45.821423+05:30","close_reason":"Closed"}
{"id":"opencode-zip","title":"Add Stryker configuration","description":"Create stryker.conf.js for mutation testing","notes":"Created stryker.conf.js with vitest runner configuration","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T15:54:32.790194+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T15:59:24.0153+05:30","closed_at":"2026-01-14T15:59:24.015303+05:30"}
{"id":"opencode-zlp","title":"{\"title\":\"Implement Opencode SDK Integration\",\"description\":\"Section 5.A - Use @opencode-ai/sdk for LLM session creation, model invocation, and audit logging\",\"priority\":1}","description":"Section 5.A - Implement Opencode SDK Integration\n\nRequirements:\nUse @opencode-ai/sdk for LLM operations instead of simulation:\n\n1. Create sessions for audit logging\n   - session = OpencodeSDK.createSession({taskId, agent, model})\n   - session.start() / session.end()\n\n2. Invoke LLM models with specific parameters\n   - response = await session.prompt(prompt, {model, temperature, maxTokens})\n   - Support streaming for long responses\n\n3. Stream logs to UI\n   - session.on('log', (log) => emitToUI(log))\n   - Real-time progress updates\n\n4. Error handling and retry logic\n   - SDK handles model failures automatically\n   - Configurable retry attempts\n\nFiles to modify:\n- lib/runner/index.js (replace simulation with SDK)\n- package.json (add @opencode-ai/sdk dependency)\n- Create lib/sdk-client.js (SDK wrapper)\n\nSuccess criteria:\n- LLM calls go through Opencode SDK\n- Audit trails captured in sessions\n- Real-time logs streamed to UI\n- Fallback on SDK failures\n- Model parameters configurable per agent\n\nDependencies:\n- @opencode-ai/sdk package installed\n- API keys configured\n- UI event emitter available","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-14T12:28:58.975761+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-14T13:26:23.296898+05:30","closed_at":"2026-01-14T13:26:23.296898+05:30","close_reason":"Completed"}
{"id":"opencode-zsd","title":"Test","description":"Test TLDR context injection with existing agents to validate functionality.\n\n**Requirements**:\n- Test with general-purpose agents\n- Test with code-editing agents\n- Verify context is properly injected\n- Measure token savings and latency\n\n**Implementation**:\n- Create integration test script\n- Run agent with and without TLDR\n- Compare outputs and metrics\n- Document results\n\n**Dependencies**:\n- Phase 1 (DONE)\n- Phase 2 Tasks 1-4","status":"closed","priority":2,"issue_type":"task","owner":"buddhi@haulmatic.com","created_at":"2026-01-15T17:04:57.418828+05:30","created_by":"Buddhi De Silva","updated_at":"2026-01-15T21:19:01.163051+05:30","closed_at":"2026-01-15T21:19:01.163051+05:30","close_reason":"Completed: Tested context injection with 92% pass rate"}
